"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BottomSheetRoot=BottomSheetRoot;const jsx_runtime_1=require("react/jsx-runtime"),react_native_gesture_handler_1=require("@granite-js/native/react-native-gesture-handler"),react_1=require("react"),react_native_1=require("react-native"),HideAccessibility_1=require("../../core/contexts/HideAccessibility"),core_1=require("../../core"),const_1=require("./const"),Container_1=require("./Container"),Dimmer_1=require("./Dimmer"),Handle_1=require("./Handle"),HeaderContainer_1=require("./HeaderContainer"),RenderingAnimation_1=require("./utils/RenderingAnimation");function BottomSheetRoot({open:e,header:t,headerDescription:n,cta:m,disableDimmer:g=!1,children:h,onDimmerClick:_,onClose:c,onExited:x,style:y,wrapper:b=react_native_gesture_handler_1.ScrollView,wrapperProps:C,a11yIncludeHeaderInScroll:j=!0,unstable_disableDragging:S=!1}){const r=(0,HideAccessibility_1.useHideAccessibility)(),i=(0,react_1.useRef)(null),o=(0,react_1.useCallback)(()=>{react_native_1.Keyboard.dismiss(),c?.()},[c]),D=(0,react_1.useCallback)(()=>{i.current?.darken()},[]),f=(0,react_1.useCallback)(()=>{i.current?.lighten(.5)},[]),l=(0,react_1.useCallback)(()=>{i.current?.reset()},[]),q=t!=null?30:0,A=(0,react_1.useMemo)(()=>[t,n].filter(s=>s!=null).length*30,[t,n]),a=(0,core_1.useFontScaleCondition)(const_1.a11yCondition.root)&&j,u=t!=null||n!=null?(0,jsx_runtime_1.jsxs)(HeaderContainer_1.BottomSheetHeaderContainer,{children:[(0,jsx_runtime_1.jsx)(RenderingAnimation_1.BottomSheetRenderingAnimation,{children:t}),(0,jsx_runtime_1.jsx)(RenderingAnimation_1.BottomSheetRenderingAnimation,{delay:q,children:n})]}):null;return(0,react_1.useEffect)(()=>(e?r.activate():r.inactivate(),r.inactivate),[r,e]),(0,jsx_runtime_1.jsxs)(react_native_1.View,{style:{position:"absolute",top:0,left:0,right:0,bottom:0},pointerEvents:e?"auto":"none",onAccessibilityEscape:()=>{o?.()},children:[g?null:(0,jsx_runtime_1.jsx)(Dimmer_1.BottomSheetDimmer,{ref:i,open:e,onPress:()=>{o?.(),_?.()}}),(0,jsx_runtime_1.jsxs)(Container_1.BottomSheetContainer,{open:e,onExited:x,onDraggedUp:D,onDraggedMiddle:l,onDraggedDown:f,onDragToClose:o,onDragFinished:l,style:y,unstable_disableDragging:S,children:[(0,jsx_runtime_1.jsxs)(react_native_1.View,{children:[(0,jsx_runtime_1.jsx)(Handle_1.BottomSheetHandle,{}),!a&&u]}),(0,jsx_runtime_1.jsxs)(b,{...C,children:[a&&u,react_1.Children.map(h,(s,d)=>(0,jsx_runtime_1.jsx)(RenderingAnimation_1.BottomSheetRenderingAnimation,{delay:A+d*30,children:s},d))]}),m]})]})}
