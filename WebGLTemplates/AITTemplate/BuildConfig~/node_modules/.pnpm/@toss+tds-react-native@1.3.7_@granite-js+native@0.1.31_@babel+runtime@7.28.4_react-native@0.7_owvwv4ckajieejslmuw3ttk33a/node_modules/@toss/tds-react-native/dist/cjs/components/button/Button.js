"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Button=exports.containerStylesBySize=void 0;const jsx_runtime_1=require("react/jsx-runtime"),tds_colors_1=require("@toss/tds-colors"),tds_easings_1=require("@toss/tds-easings"),react_1=require("react"),react_native_1=require("react-native"),core_1=require("../../core"),animated_1=require("../../interactions/animated"),gradient_1=require("../gradient"),txt_1=require("../txt"),BaseButton=(0,react_1.forwardRef)(function({children:r,onPress:t,size:i="big",style:s="fill",display:l="inline",disabled:a=!1,loading:n=!1,viewStyle:o,color:u,containerStyle:A,textStyle:y,pointerEvents:k=void 0,leftAccessory:V,onPressIn:p,onPressOut:b,...D},h){const d=(0,core_1.useTheme)(),f=useLoadersAnimation(),g=s==="weak"?{backgroundColor:d.token.button.backgroundWeakColor,textColor:d.token.button.textWeakColor,dimColor:d.token.button.dimWeakColor,gradientStartColor:d.token.button.gradientStartWeakColor,gradientEndColor:d.token.button.gradientEndWeakColor,loaderColor:d.token.button.loaderWeakColor}:{backgroundColor:d.token.button.backgroundFillColor,textColor:d.token.button.textFillColor,dimColor:d.token.button.dimFillColor,gradientStartColor:d.token.button.gradientStartFillColor,gradientEndColor:d.token.button.gradientEndFillColor,loaderColor:d.token.button.loaderFillColor},v=!(a||n),[q,C]=(0,react_1.useState)(!1),N=(0,react_1.useCallback)(m=>{p?.(m),v!==!1&&C(!0)},[p,v]),x=(0,react_1.useCallback)(m=>{b?.(m),v!==!1&&C(!1)},[b,v]),c=useButtonAnimation({style:s,display:l});(0,react_1.useEffect)(()=>{if(q){c.controller.pressed.start();return}if(n&&f.controller.loader.start(),n&&a){c.controller.loadingWhileDisabled.start();return}if(n&&!a){c.controller.loading.start();return}if(!n&&a){c.controller.disabled.start();return}c.controller.default.start()},[n,a,c.controller,f.controller,q]);const S=react_1.Children.map(r,(m,j)=>typeof m=="string"||typeof m=="number"?(0,jsx_runtime_1.jsx)(txt_1.Txt,{typography:typographyBySize[i],color:u??g.textColor,style:y,fontWeight:"semibold",children:m}):(0,jsx_runtime_1.jsx)(react_1.Fragment,{children:m},j));return(0,jsx_runtime_1.jsx)(react_native_1.Pressable,{accessibilityRole:"button",onPress:v?t:void 0,pointerEvents:k,onPressIn:N,onPressOut:x,style:[vierStyleByDislpay[l],o],ref:h,...D,accessibilityState:{disabled:a,...D.accessibilityState},children:(0,jsx_runtime_1.jsxs)(animated_1.Animated.View,{ref:h,style:[exports.containerStylesBySize.base,exports.containerStylesBySize[i],containerStylesByDisplay[l],c.style.container,A],children:[(0,jsx_runtime_1.jsx)(animated_1.Animated.View,{style:[{position:"absolute",top:0,left:0,right:0,bottom:0},{backgroundColor:g.backgroundColor},c.style.background]}),(0,jsx_runtime_1.jsxs)(animated_1.Animated.View,{style:[{flexDirection:"row",alignItems:"center"},c.style.text],children:[V,S]}),(0,jsx_runtime_1.jsx)(animated_1.Animated.View,{style:[{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center"},c.style.gradient],children:(0,jsx_runtime_1.jsx)(react_native_1.View,{style:{width:"110%",aspectRatio:1},children:(0,jsx_runtime_1.jsx)(gradient_1.RadialGradient,{colors:[g.gradientStartColor,g.gradientEndColor]})})}),(0,jsx_runtime_1.jsx)(animated_1.Animated.View,{style:[{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center"},c.style.loader],children:(0,jsx_runtime_1.jsxs)(animated_1.Animated.View,{style:{flexDirection:"row",gap:7},children:[(0,jsx_runtime_1.jsx)(animated_1.Animated.View,{style:[{width:8,height:8,backgroundColor:g.loaderColor,borderRadius:99},f.style.loader1]}),(0,jsx_runtime_1.jsx)(animated_1.Animated.View,{style:[{width:8,height:8,backgroundColor:g.loaderColor,borderRadius:99},f.style.loader2]}),(0,jsx_runtime_1.jsx)(animated_1.Animated.View,{style:[{width:8,height:8,backgroundColor:g.loaderColor,borderRadius:99},f.style.loader3]})]})}),(0,jsx_runtime_1.jsx)(animated_1.Animated.View,{style:[{position:"absolute",top:0,left:0,right:0,bottom:0},{backgroundColor:g.dimColor},c.style.dim]})]})})});exports.containerStylesBySize=react_native_1.StyleSheet.create({base:{alignItems:"center",justifyContent:"center",overflow:"hidden",position:"relative"},tiny:{paddingHorizontal:10,paddingVertical:2,minHeight:32,minWidth:52,borderRadius:8},medium:{paddingHorizontal:16,paddingVertical:2,minHeight:38,minWidth:64,borderRadius:10},large:{paddingHorizontal:16,paddingVertical:2,minHeight:48,minWidth:80,borderRadius:14},big:{paddingHorizontal:28,paddingVertical:2,minHeight:56,minWidth:96,borderRadius:16}});const vierStyleByDislpay=react_native_1.StyleSheet.create({inline:{alignSelf:"flex-start"},block:{},full:{}}),containerStylesByDisplay=react_native_1.StyleSheet.create({inline:{},block:{},full:{borderRadius:0}});function useLoaderAnimation(){const e=(0,react_native_1.useAnimatedValue)(.2),r=(0,react_native_1.useAnimatedValue)(.8),t=(0,react_1.useCallback)(()=>animated_1.Animated.parallel([animated_1.Animated.loop(animated_1.Animated.sequence([animated_1.Animated.timing(e,{toValue:1,duration:300,easing:react_native_1.Easing.linear,useNativeDriver:!1}),animated_1.Animated.timing(e,{toValue:.2,duration:300,easing:react_native_1.Easing.linear,useNativeDriver:!1})])),animated_1.Animated.loop(animated_1.Animated.sequence([animated_1.Animated.timing(r,{toValue:1,duration:300,easing:react_native_1.Easing.linear,useNativeDriver:!1}),animated_1.Animated.timing(r,{toValue:.8,duration:300,easing:react_native_1.Easing.linear,useNativeDriver:!1})]))]),[e,r]);return(0,react_1.useMemo)(()=>({style:{loader:{opacity:e,transform:[{scale:r}]}},controller:{create:t}}),[e,r,t])}function useLoadersAnimation(){const e=useLoaderAnimation(),r=useLoaderAnimation(),t=useLoaderAnimation(),i=(0,react_1.useMemo)(()=>animated_1.Animated.parallel([animated_1.Animated.sequence([e.controller.create()]),animated_1.Animated.sequence([animated_1.Animated.delay(100),r.controller.create()]),animated_1.Animated.sequence([animated_1.Animated.delay(200),t.controller.create()])]),[e.controller,r.controller,t.controller]);return(0,react_1.useMemo)(()=>({style:{loader1:e.style.loader,loader2:r.style.loader,loader3:t.style.loader},controller:{loader:{...i,start:()=>{i.reset(),i.start()}}}}),[e.style.loader,r.style.loader,t.style.loader,i])}function useButtonAnimation({style:e,display:r}){const t=(0,react_native_1.useAnimatedValue)(1),i=(0,react_native_1.useAnimatedValue)(1),s=(0,react_native_1.useAnimatedValue)(1),l=(0,react_native_1.useAnimatedValue)(1),a=(0,react_native_1.useAnimatedValue)(1),n=(0,react_native_1.useAnimatedValue)(0),o=(0,react_native_1.useAnimatedValue)(0),u=(0,react_native_1.useAnimatedValue)(0),A=(0,react_1.useMemo)(()=>animated_1.Animated.parallel([animated_1.Animated.spring(n,{toValue:0,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(s,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(o,{toValue:0,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(l,{toValue:1,...tds_easings_1.spring.quick,delay:100,useNativeDriver:!1}),animated_1.Animated.spring(u,{toValue:0,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(t,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(i,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(a,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1})]),[s,t,i,n,o,u,l,a]),y=(0,react_1.useMemo)(()=>animated_1.Animated.parallel([animated_1.Animated.spring(n,{toValue:.26,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(s,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(o,{toValue:0,...tds_easings_1.spring.quick,useNativeDriver:!1}),r==="inline"?animated_1.Animated.spring(i,{toValue:.96,...tds_easings_1.spring.rapid,useNativeDriver:!1}):animated_1.Animated.spring(a,{toValue:.96,...tds_easings_1.spring.rapid,useNativeDriver:!1})]),[s,i,n,r,o,a]),k=(0,react_1.useMemo)(()=>(o.setValue(0),animated_1.Animated.parallel([animated_1.Animated.spring(n,{toValue:.13,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(s,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.loop(animated_1.Animated.sequence([animated_1.Animated.timing(o,{toValue:e==="fill"?.7:.24,easing:react_native_1.Easing.bezier(...tds_easings_1.bezier.out),duration:600,useNativeDriver:!1}),animated_1.Animated.timing(o,{toValue:0,easing:react_native_1.Easing.bezier(...tds_easings_1.bezier.out),duration:600,useNativeDriver:!1})])),animated_1.Animated.spring(l,{toValue:0,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(u,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(t,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(i,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(a,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1})])),[s,t,i,n,o,u,e,l,a]),V=(0,react_1.useMemo)(()=>(o.setValue(0),animated_1.Animated.parallel([animated_1.Animated.spring(n,{toValue:0,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(s,{toValue:e==="fill"?.26:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.loop(animated_1.Animated.sequence([animated_1.Animated.timing(o,{toValue:e==="fill"?.2:.14,easing:react_native_1.Easing.bezier(...tds_easings_1.bezier.out),duration:600,useNativeDriver:!1}),animated_1.Animated.timing(o,{toValue:0,easing:react_native_1.Easing.bezier(...tds_easings_1.bezier.out),duration:600,useNativeDriver:!1})])),animated_1.Animated.spring(l,{toValue:0,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(u,{toValue:e==="fill"?.7:.3,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(t,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(i,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(a,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1})])),[s,t,i,n,o,u,e,l,a]),p=(0,react_1.useMemo)(()=>animated_1.Animated.parallel([animated_1.Animated.spring(n,{toValue:0,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(s,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(o,{toValue:0,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(l,{toValue:e==="fill"?1:.38,...tds_easings_1.spring.quick,delay:100,useNativeDriver:!1}),animated_1.Animated.spring(u,{toValue:0,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(t,{toValue:e==="fill"?.26:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(i,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1}),animated_1.Animated.spring(a,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!1})]),[s,t,i,n,o,u,e,l,a]);return(0,react_1.useMemo)(()=>({style:{container:{opacity:t,transform:[{scale:i}]},background:{opacity:s},text:{opacity:l,transform:[{scale:a}]},dim:{opacity:n},gradient:{opacity:o},loader:{opacity:u}},controller:{default:A,pressed:y,loading:k,loadingWhileDisabled:V,disabled:p}}),[s,t,i,A,n,p,o,u,k,V,y,l,a])}const typographyBySize={tiny:"t7",medium:"t6",large:"st9",big:"st9"},ColorByType={danger:tds_colors_1.colors.red500,light:tds_colors_1.colors.whiteOpacity900,dark:tds_colors_1.colors.grey700};exports.Button=(0,react_1.forwardRef)(function({type:r,...t},i){const s=(0,react_1.useMemo)(()=>r===void 0||r==="primary"?{}:{color:{primary:ColorByType[r]}},[r]);return(0,jsx_runtime_1.jsx)(core_1.ThemeProvider,{token:s,children:(0,jsx_runtime_1.jsx)(BaseButton,{...t,ref:i})})});
