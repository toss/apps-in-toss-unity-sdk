"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnimatedCheckboxGraphic=AnimatedCheckboxGraphic;const jsx_runtime_1=require("react/jsx-runtime"),react_native_svg_1=require("@granite-js/native/react-native-svg"),tds_colors_1=require("@toss/tds-colors"),hex_to_rgba_1=__importDefault(require("hex-to-rgba")),react_1=require("react"),react_native_1=require("react-native"),core_1=require("../../../../core"),const_1=require("../../const"),paths_1=require("./paths"),styles_1=require("./styles");function AnimatedCheckboxGraphic({checked:e,size:n,children:f,style:l,onPress:h,onTouchStart:_,onTouchEnd:p,onTouchCancel:d,...k}){const[t,r]=(0,react_1.useState)(e?"on":"off"),c=(0,core_1.useAdaptive)(),i=(0,react_1.useMemo)(()=>({grey200:(0,hex_to_rgba_1.default)(c.grey200??tds_colors_1.colors.grey200),blue500:(0,hex_to_rgba_1.default)(tds_colors_1.colors.blue500)}),[c.grey200]),g=(0,react_1.useCallback)(()=>{r(s=>s==="on"?"on-press":"off-press")},[]),u=(0,react_1.useCallback)(()=>{r(e?s=>s==="on-press"?"on":"off":s=>s==="off-press"?"off":"on")},[e]);(0,react_1.useEffect)(()=>{r(e?"on":"off")},[e]);const o=(0,react_1.useRef)(new react_native_1.Animated.Value(animationConfig.check[t].strokeDashoffset)).current;(0,react_1.useEffect)(()=>{react_native_1.Animated.timing(o,{toValue:animationConfig.check[t].strokeDashoffset,...const_1.TIMING_CONFIG,useNativeDriver:!0}).start()},[t,o]);const a=(0,react_1.useRef)(new react_native_1.Animated.Value(animationConfig.check[t].scale)).current;return(0,react_1.useEffect)(()=>{react_native_1.Animated.spring(a,{toValue:animationConfig.check[t].scale,...const_1.SPRING_CONFIG,useNativeDriver:!0}).start()},[t,a]),(0,jsx_runtime_1.jsx)(react_native_1.Pressable,{onTouchStart:s=>{g(),_?.(s)},onTouchEnd:s=>{u(),p?.(s)},onTouchCancel:s=>{u(),d?.(s)},onPress:h,style:[styles_1.styles.container,l],accessibilityRole:"checkbox",accessibilityState:{checked:e,disabled:!1},...k,children:(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[{width:n,height:n},styles_1.styles.checkContainer],children:(0,jsx_runtime_1.jsxs)(AnimatedSvg,{viewBox:"0 0 24 24",style:{transform:[{scale:a}]},children:[(0,jsx_runtime_1.jsx)(paths_1.Check,{stroke:i.grey200}),(0,jsx_runtime_1.jsx)(paths_1.Check,{stroke:i.blue500,strokeDasharray:"24px 24px",strokeDashoffset:o})]})}),f]})})}const AnimatedSvg=react_native_1.Animated.createAnimatedComponent(react_native_svg_1.Svg),animationConfig={check:{off:{strokeDashoffset:24,scale:1},"off-press":{strokeDashoffset:24*.6,scale:.9},on:{strokeDashoffset:0,scale:1},"on-press":{strokeDashoffset:10,scale:.9}}};
