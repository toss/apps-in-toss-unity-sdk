"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const jsx_runtime_1=require("react/jsx-runtime"),tds_easings_1=require("@toss/tds-easings"),react_1=require("react"),react_native_1=require("react-native"),utils_1=require("../../utils"),BaseDialogContents_1=require("./BaseDialogContents"),noop=()=>{},BaseDialog=(0,react_1.forwardRef)(({open:s,header:r,body:a,footer:o,closeOnDimmerClick:c,onClose:l,onExited:u,onEntered:p=noop,...m},d)=>{const e=(0,react_1.useRef)(new react_native_1.Animated.Value(animationConfig.content.close.opacity)).current,n=(0,react_1.useRef)(new react_native_1.Animated.Value(animationConfig.content.close.scale)).current,t=(0,react_1.useRef)(new react_native_1.Animated.Value(animationConfig.dimmer.close.opacity)).current,g=(0,react_1.useCallback)(()=>new Promise(i=>{react_native_1.Animated.parallel([react_native_1.Animated.spring(e,{toValue:animationConfig.content.open.opacity,useNativeDriver:!0,...tds_easings_1.spring.quick}),react_native_1.Animated.spring(n,{toValue:animationConfig.content.open.scale,useNativeDriver:!0,...tds_easings_1.spring.quick}),react_native_1.Animated.spring(t,{toValue:animationConfig.dimmer.open.opacity,useNativeDriver:!0,...tds_easings_1.spring.quick})]).start(()=>{i()})}),[e,n,t]),y=(0,react_1.useCallback)(()=>new Promise(i=>{react_native_1.Animated.parallel([react_native_1.Animated.spring(e,{toValue:animationConfig.content.close.opacity,useNativeDriver:!0,...tds_easings_1.spring.rapid}),react_native_1.Animated.spring(t,{toValue:animationConfig.dimmer.close.opacity,useNativeDriver:!0,...tds_easings_1.spring.rapid})]).start(()=>{i()})}),[e,t]),{presenceState:A}=(0,utils_1.useAnimatePresence)(s,{enter:g,exit:y,onExited:u,onEntered:p}),{startWiggle:f,style:v}=(0,utils_1.useWiggleAnim)({direction:"x",type:"small"});return A==="invisible"?(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{}):(0,jsx_runtime_1.jsxs)(react_native_1.View,{ref:d,style:styles.container,...m,children:[(0,jsx_runtime_1.jsx)(BaseDialogContents_1.DialogOverlay,{style:{opacity:t},onPress:c?l:f}),(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:[{opacity:e,transform:[{scale:n},...v.transform]}],children:(0,jsx_runtime_1.jsx)(BaseDialogContents_1.DialogContent,{header:r,body:a,footer:o})})]})});exports.default=BaseDialog;const animationConfig={dimmer:{open:{opacity:.2},close:{opacity:0}},content:{open:{opacity:1,scale:1},close:{opacity:0,scale:.8}}},styles=react_native_1.StyleSheet.create({container:{flex:1,justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%"}});
