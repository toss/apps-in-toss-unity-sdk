"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Highlight=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),react_native_1=require("react-native"),tds_colors_1=require("@toss/tds-colors"),core_1=require("../../core"),HighlightUI_1=require("./HighlightUI"),hooks_1=require("./hooks"),useTimestampRef_1=require("./hooks/useTimestampRef"),mergeRefs_1=require("./utils/mergeRefs");exports.Highlight=(0,react_1.forwardRef)(function({open:r,delay:u=0,padding:e=0,paddingLeft:n=e,paddingTop:l=e,paddingRight:h=e,paddingBottom:f=e,message:a,messageColor:m=tds_colors_1.colors.white,messageXAlignment:g,messageYAlignment:_,onPress:t,onExited:R,onTargetPress:q,children:v,closeLockDuration:x=0,...s},w){const j={padding:e,paddingLeft:n,paddingTop:l,paddingRight:h,paddingBottom:f,message:a,messageColor:m,messageXAlignment:g,messageYAlignment:_,onPress:t,onTargetPress:q,...s},i=(0,core_1.useOverlay)(),o=(0,hooks_1.useTimeout)(),c=(0,react_1.useRef)(null),p=(0,useTimestampRef_1.useTimestampRef)({active:r});return(0,react_1.useEffect)(()=>{if(r)return o.set(()=>{c.current?.measureInWindow((H,T,I,d)=>{i.open(({isOpen:U,close:k,exit:y})=>(0,jsx_runtime_1.jsx)(HighlightUI_1.HighlightUI,{...j,x:H,y:T,width:I,height:d,open:U,onPress:()=>{new Date().getTime()-p.current>x*1e3&&(t?.(),k())},onExited:()=>{R?.(),y()}}))})},u*1e3),o.clear;i.close()},[r]),(0,jsx_runtime_1.jsx)(react_native_1.View,{...s,children:(0,jsx_runtime_1.jsx)(react_native_1.View,{ref:(0,mergeRefs_1.mergeRefs)(w,c),removeClippedSubviews:!1,children:v})})});
