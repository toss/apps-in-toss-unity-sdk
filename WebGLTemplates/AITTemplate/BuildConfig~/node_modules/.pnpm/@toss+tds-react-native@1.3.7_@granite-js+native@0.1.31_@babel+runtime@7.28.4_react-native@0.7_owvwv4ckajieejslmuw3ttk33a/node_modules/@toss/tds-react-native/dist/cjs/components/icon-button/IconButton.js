"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IconButton=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_native_svg_1=require("@granite-js/native/react-native-svg"),tds_color_utils_1=require("@toss/tds-color-utils"),tds_easings_1=require("@toss/tds-easings"),react_1=require("react"),react_native_1=require("react-native"),core_1=require("../../core"),animated_1=require("../../interactions/animated"),generateHapticFeedback_1=require("../../native/generateHapticFeedback"),private_1=require("../icon/private"),AnimatedSvg=animated_1.Animated.createAnimatedComponent(react_native_svg_1.Svg),AnimatedRect=animated_1.Animated.createAnimatedComponent(react_native_svg_1.Rect),AnimatedPressable=animated_1.Animated.createAnimatedComponent(react_native_1.Pressable),IconButtonImpl=(0,react_1.forwardRef)(function({source:d,name:g,color:r,bgColor:h,variant:t="clear",label:A,iconSize:o=24,children:x,style:y,onPressIn:p,onPressOut:m,...C},k){const f=(0,core_1.useAdaptive)(),c=h??f.greyOpacity100,_={borderWidth:1,borderStyle:"solid",borderColor:f.greyOpacity100},n=(0,react_1.useRef)(new animated_1.Animated.Value(0)).current,i=(0,react_1.useRef)(new animated_1.Animated.Value(1)).current,R=n.interpolate({inputRange:[0,1],outputRange:[c,(0,tds_color_utils_1.getNextColorValue)({color:c})]}),a=(0,react_1.useRef)(new animated_1.Animated.Value(0)).current,V=a.interpolate({inputRange:[0,1],outputRange:["transparent",c]}),u=r!=null,s=(0,react_1.useRef)(new animated_1.Animated.Value(0)).current,q=s.interpolate({inputRange:[0,1],outputRange:[r??"grey",r?(0,tds_color_utils_1.getNextColorValue)({color:r}):"grey"]}),v=(0,react_1.useCallback)(()=>{animated_1.Animated.spring(i,{toValue:.9,useNativeDriver:!1,...tds_easings_1.spring.rapid}).start(),t==="fill"?animated_1.Animated.timing(n,{toValue:1,useNativeDriver:!1,easing:react_native_1.Easing.bezier(...tds_easings_1.bezier.out),duration:500}).start():animated_1.Animated.spring(a,{toValue:1,useNativeDriver:!1,...tds_easings_1.spring.rapid}).start(),u&&animated_1.Animated.spring(s,{toValue:1,useNativeDriver:!1,...tds_easings_1.spring.rapid}).start()},[n,a,s,i,t,u]),b=(0,react_1.useCallback)(()=>{animated_1.Animated.spring(i,{toValue:1,useNativeDriver:!1,...tds_easings_1.spring.quick}).start(),t==="fill"?animated_1.Animated.timing(n,{toValue:0,useNativeDriver:!1,easing:react_native_1.Easing.bezier(...tds_easings_1.bezier.out),duration:500}).start():animated_1.Animated.spring(a,{toValue:0,useNativeDriver:!1,...tds_easings_1.spring.quick}).start(),u&&animated_1.Animated.spring(s,{toValue:0,useNativeDriver:!1,...tds_easings_1.spring.quick}).start()},[n,a,s,i,t,u]),w=(0,react_1.useCallback)(l=>{v(),p?.(l),(0,generateHapticFeedback_1.generateHapticFeedback)({type:"tickWeak"})},[v,p]),I=(0,react_1.useCallback)(l=>{b(),m?.(l)},[m,b]);return(0,jsx_runtime_1.jsx)(AnimatedPressable,{ref:k,style:[{borderRadius:getRadius(o),transform:[{scale:i}],padding:getPaddingFromSize(o),backgroundColor:t==="fill"?R:V,...t==="border"?_:void 0},y],onPressIn:w,onPressOut:I,accessible:!0,accessibilityRole:"button",accessibilityLabel:A,...C,children:(0,jsx_runtime_1.jsx)(AnimatedSvg,{height:o,width:o,viewBox:"0 0 100 100",children:(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsxs)(react_native_svg_1.Mask,{id:"mask",x:"0",y:"0",width:"100",height:"100",children:[d!==void 0&&(0,jsx_runtime_1.jsx)(react_native_svg_1.Image,{href:d,x:"0",y:"0",height:"100",width:"100",preserveAspectRatio:"xMidYMid meet"}),g!==void 0&&(0,jsx_runtime_1.jsx)(private_1.SvgIcon,{name:g,x:"0",y:"0",height:"100",width:"100",preserveAspectRatio:"xMidYMid meet"})]}),(0,jsx_runtime_1.jsx)(AnimatedRect,{x:"0",y:"0",width:"100%",height:"100%",mask:"url(#mask)",fill:r&&q}),x]})})})});exports.IconButton=(0,react_1.memo)(IconButtonImpl);function getPaddingFromSize(e){return 18<=e&&e<=20?9:e/2}function getRadius(e){return e<=16?6:e<=20?8:12}
