"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const jsx_runtime_1=require("react/jsx-runtime"),react_native_svg_1=require("@granite-js/native/react-native-svg"),react_1=require("react"),react_native_1=require("react-native"),useCachedData_1=require("./useCachedData"),ICON_URL_PREFIX="https://static.toss.im/icons/svg",cache={},isUnsupportedTag=e=>e.includes("<pattern")?{isUnsupported:!0,tagName:"pattern"}:{isUnsupported:!1},Icon=(0,react_1.forwardRef)(function({name:t,color:r,size:n=24,accessible:a,accessibilityLabel:o,type:u="default",style:i},l){const{data:s,showFallback:d}=(0,useCachedData_1.useCachedData)(cache,t,fetchIcon,[t]),c=isUnsupportedTag(s??"");if(c.isUnsupported&&__DEV__)throw new Error(`\uC544\uC774\uCF58 \uB9AC\uC18C\uC2A4\uC5D0 \uBBF8\uC9C0\uC6D0\uB418\uB294 \uD0DC\uADF8\uAC00 \uC788\uC5B4 \uC548\uC804\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. #request-\uADF8\uB798\uD53D \uCC44\uB110\uC5D0 \uB300\uCCB4 \uC544\uC774\uCF58\uC744 \uC694\uCCAD \uD574\uC8FC\uC138\uC694. (\uC544\uC774\uCF58\uBA85: ${t}, \uBBF8\uC9C0\uC6D0 \uD0DC\uADF8: ${c.tagName})`);const f=(0,react_1.useMemo)(()=>{if(s===void 0)return;const p=/fill="#[0-9a-fA-F]{6}"/g,h=/stroke="#[0-9a-fA-F]{6}"/g;return r!==void 0?s.replace(p,`fill="${r}"`).replace(h,`stroke="${r}"`):s},[s,r]);return(0,jsx_runtime_1.jsxs)(react_native_1.View,{ref:l,style:[u==="circle"?{borderRadius:n/2,overflow:"hidden"}:void 0,{width:n,aspectRatio:1},...Array.isArray(i)?i:[i]],accessibilityRole:"image",accessibilityLabel:o,accessible:a,children:[(0,jsx_runtime_1.jsx)(react_native_svg_1.SvgXml,{width:"100%",height:"100%",color:r,fill:r,xml:f??null}),d?(0,jsx_runtime_1.jsx)(react_native_svg_1.SvgUri,{width:"100%",height:"100%",uri:getIconUrl(t),style:{backgroundColor:"yellow"}}):null]})});async function fetchIcon(e){return(await fetch(getIconUrl(e))).text()}function getIconUrl(e){const t=e.startsWith("icn-")||e.startsWith("icon-")?e:`icn-${e}`;return`${ICON_URL_PREFIX}/${t}.svg`}exports.default=Object.assign(Icon,{prefetchIcon:async e=>{const t=await fetchIcon(e);cache[e]=t}});
