"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SvgIcon=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_native_svg_1=require("@granite-js/native/react-native-svg"),react_1=require("react"),useCachedData_1=require("../useCachedData"),ICON_URL_PREFIX="https://static.toss.im/icons/svg",cache={},fillAttributesRe=/fill="#[0-9a-fA-F]{6}"/g,strokeAttributesRe=/stroke="#[0-9a-fA-F]{6}"/g,Icon=(0,react_1.forwardRef)(function({name:t,color:n,size:c=24,accessible:d,accessibilityLabel:f,type:p="default",children:i,...h},a){const{data:s,showFallback:x}=(0,useCachedData_1.useCachedData)(cache,t,fetchIcon,[t]),r=(0,react_1.useMemo)(()=>s===void 0?null:n!==void 0?(0,react_native_svg_1.parse)(s.replace(fillAttributesRe,"").replace(strokeAttributesRe,"")):(0,react_native_svg_1.parse)(s),[s,n]),g=(0,react_1.useMemo)(()=>s===void 0||n===void 0?{}:{fill:s.match(fillAttributesRe)?n:void 0,stroke:s.match(strokeAttributesRe)?n:void 0},[s,n]),o={width:c,height:c,accessibilityRole:"image",accessibilityLabel:f,accessible:d,...g,...h};if(r==null)return(0,jsx_runtime_1.jsx)(react_native_svg_1.Svg,{ref:a,...o,children:i});if(x)return(0,jsx_runtime_1.jsx)(react_native_svg_1.SvgUri,{uri:getIconUrl(t),...o,children:i});const[,,u=c,l=c]=(r.props.viewBox??"").split(" ").map(Number);if(p==="circle"){const v=u/2,j=l/2,_=Math.min(u,l)/2;return(0,jsx_runtime_1.jsxs)(react_native_svg_1.Svg,{ref:a,...r.props,...o,children:[(0,jsx_runtime_1.jsx)(react_native_svg_1.Defs,{children:(0,jsx_runtime_1.jsx)(react_native_svg_1.ClipPath,{id:"clip",children:(0,jsx_runtime_1.jsx)(react_native_svg_1.Circle,{cx:v,cy:j,r:_})})}),(0,jsx_runtime_1.jsx)(react_native_svg_1.G,{clipPath:"url(#clip)",children:r.children}),i]})}return(0,jsx_runtime_1.jsxs)(react_native_svg_1.Svg,{ref:a,...r.props,...o,children:[(0,jsx_runtime_1.jsx)(react_native_svg_1.G,{children:r.children}),i]})});async function fetchIcon(e){return(await fetch(getIconUrl(e))).text()}function getIconUrl(e){const t=e.startsWith("icn-")||e.startsWith("icon-")?e:`icn-${e}`;return`${ICON_URL_PREFIX}/${t}.svg`}class SvgIconClass extends react_1.Component{render(){return(0,jsx_runtime_1.jsx)(Icon,{...this.props})}}exports.SvgIcon=Object.assign(SvgIconClass,{Root:SvgIconClass,prefetchIcon:async e=>{const t=await fetchIcon(e);cache[e]=t}});
