"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListRow=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),react_native_1=require("react-native"),core_1=require("../../core"),animated_1=require("../../interactions/animated"),pressable_effect_1=require("../../interactions/pressable-effect"),ListRowDisabled_1=require("./ListRowDisabled"),ListRowRightArrow_1=require("./ListRowRightArrow"),BlinkEffect_1=require("./animation/BlinkEffect"),ShineEffect_1=require("./animation/ShineEffect"),sToMs_1=require("./animation/sToMs"),useBlinkAnimation_1=require("./animation/useBlinkAnimation"),useShineAnimation_1=require("./animation/useShineAnimation"),a11y_1=require("../../utils/a11y");exports.ListRow=(0,react_1.forwardRef)(function({left:a,right:t,contents:c,withArrow:x=!1,horizontalPadding:R,verticalPadding:g=24,leftAlignment:w="center",rightAlignment:j="center",onPress:l,containerStyle:p,style:S,preferReducedMotion:L=!1,disabled:n,disabledStyle:u="type1",...k},q){const{colorPreference:v}=(0,core_1.useColorPreference)(),V=(0,core_1.useAdaptive)(),A=useShouldAlignVertical(),E=(0,react_1.useMemo)(()=>{switch(g){case"extraSmall":case 8:return 8;case"small":case 16:return 16;case"medium":case 24:return 24;case"large":case 32:return 32}},[g]),[_,d]=(0,react_1.useState)({width:0,height:0}),r=(0,useBlinkAnimation_1.useBlinkAnimation)({containerSize:_}),s=(0,useShineAnimation_1.useShineAnimation)({containerSize:_}),o=(0,react_1.useRef)(null),b=(0,react_1.useCallback)((e=1.5)=>{r.start(),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{r.exit(),o.current=null},(0,sToMs_1.sToMs)(e))},[r]);(0,react_1.useEffect)(()=>()=>{o.current&&clearTimeout(o.current)},[]);const T=(0,react_1.useCallback)((e=1)=>{v==="light"?s.light.start(e):s.dark.start(e)},[v,s]);(0,react_1.useImperativeHandle)(q,()=>({blink:b,shine:T}));const f=(0,react_1.useMemo)(()=>(0,jsx_runtime_1.jsxs)(animated_1.Animated.View,{pointerEvents:n?"none":void 0,style:[{paddingVertical:E,position:"relative"},styles.container,p,r.container],children:[(0,jsx_runtime_1.jsx)(BlinkEffect_1.BlinkEffect,{blinkAnimation:r}),a!=null?(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[styles.left,w==="top"?{alignSelf:"flex-start"}:void 0],children:a}):void 0,A?(0,jsx_runtime_1.jsxs)(react_native_1.View,{style:[styles.content],children:[c,t!==void 0&&(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[styles.rightVertical],children:t})]}):(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[c!==void 0&&(0,jsx_runtime_1.jsx)(react_native_1.View,{style:styles.content,children:c}),t!==void 0&&(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[styles.right,j==="top"?{alignItems:"flex-start"}:void 0],children:t})]}),x&&(0,jsx_runtime_1.jsx)(ListRowRightArrow_1.ListRowRightArrow,{})]}),[n,E,p,r,a,w,A,c,t,j,x]),h=(0,react_1.useMemo)(()=>(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[n&&u==="type1"?(0,jsx_runtime_1.jsx)(ListRowDisabled_1.ListRowDisabled.Style1,{}):void 0,n&&u==="type2"?(0,jsx_runtime_1.jsx)(ListRowDisabled_1.ListRowDisabled.Style2,{}):void 0]}),[n,u]),m=[S,R===0?{marginHorizontal:-24}:void 0,{overflow:"hidden"}],y=(0,a11y_1.generateA11yRestProps)(k,{role:l==null?void 0:"button",disabled:n});return L?l==null?(0,jsx_runtime_1.jsxs)(react_native_1.View,{...y,onLayout:e=>{d({width:e.nativeEvent.layout.width,height:e.nativeEvent.layout.height})},style:m,children:[f,(0,jsx_runtime_1.jsx)(ShineEffect_1.ShineEffect,{shineAnimation:s}),h]}):(0,jsx_runtime_1.jsx)(react_native_1.TouchableHighlight,{...y,onLayout:e=>{d({width:e.nativeEvent.layout.width,height:e.nativeEvent.layout.height})},onPress:n?void 0:l,underlayColor:V.greyOpacity100,style:m,children:(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[f,(0,jsx_runtime_1.jsx)(ShineEffect_1.ShineEffect,{shineAnimation:s}),h]})}):(0,jsx_runtime_1.jsxs)(pressable_effect_1.PressableEffect,{...y,onLayout:e=>{d({width:e.nativeEvent.layout.width,height:e.nativeEvent.layout.height})},underlay:(0,jsx_runtime_1.jsx)(pressable_effect_1.PressableEffect.Underlay,{style:styles.underlay}),style:m,onPress:n?void 0:l,children:[f,(0,jsx_runtime_1.jsx)(ShineEffect_1.ShineEffect,{shineAnimation:s}),h]})});const useShouldAlignVertical=()=>{const{typographyLevel:i}=(0,core_1.useTypographyTheme)(),{width:a}=(0,react_native_1.useWindowDimensions)(),t=react_native_1.Platform.OS==="android";return a>=560?t?i>=200:i?.startsWith("A11y")&&i!=="A11y_Medium":t?i>=135:i?.startsWith("A11y")},styles=react_native_1.StyleSheet.create({underlay:{marginHorizontal:6,marginVertical:4,borderRadius:12},container:{flexDirection:"row",alignItems:"center",paddingHorizontal:24},content:{flex:1,justifyContent:"center"},left:{flexDirection:"row"},right:{marginLeft:16,height:"100%",flexDirection:"row",alignItems:"center",maxWidth:"80%",justifyContent:"flex-end"},rightVertical:{maxWidth:"100%",width:"100%",marginLeft:0}});
