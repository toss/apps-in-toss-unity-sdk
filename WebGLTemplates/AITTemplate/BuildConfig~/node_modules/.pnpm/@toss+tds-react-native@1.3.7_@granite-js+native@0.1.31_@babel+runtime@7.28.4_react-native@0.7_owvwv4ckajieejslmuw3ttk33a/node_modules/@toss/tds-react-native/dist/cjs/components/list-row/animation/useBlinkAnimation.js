"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useBlinkAnimation=void 0;const tds_easings_1=require("@toss/tds-easings"),react_1=require("react"),animated_1=require("../../../interactions/animated"),animationState_1=require("./animationState"),sToMs_1=require("./sToMs"),useBlinkAnimation=({containerSize:l})=>{const t=(0,react_1.useRef)(new animated_1.Animated.Value(1)).current,i=(0,react_1.useRef)(new animated_1.Animated.Value(0)).current,e=(0,react_1.useRef)(new animated_1.Animated.Value(0)).current,n=(0,react_1.useRef)(new animated_1.Animated.Value(0)).current,[m,a]=(0,react_1.useState)(animationState_1.BlinkAnimationState.Idle),u=(0,react_1.useCallback)(()=>{a(animationState_1.BlinkAnimationState.StartAnimation|animationState_1.BlinkAnimationState.Playing),t.setValue(1);const s=animated_1.Animated.sequence([animated_1.Animated.spring(t,{toValue:1.02,stiffness:766,damping:52,useNativeDriver:!0}),animated_1.Animated.spring(t,{toValue:1,...tds_easings_1.spring.slow,useNativeDriver:!0})]);e.setValue(0);const r=animated_1.Animated.parallel([animated_1.Animated.spring(i,{toValue:.04,delay:(0,sToMs_1.sToMs)(.48),...tds_easings_1.spring.basic,useNativeDriver:!0})]);n.setValue(0),e.setValue(0);const o=animated_1.Animated.parallel([animated_1.Animated.spring(e,{toValue:1,delay:(0,sToMs_1.sToMs)(.02),...tds_easings_1.spring.basic,useNativeDriver:!0}),animated_1.Animated.spring(n,{toValue:1,delay:(0,sToMs_1.sToMs)(.02),...tds_easings_1.spring.slow,useNativeDriver:!0})]);animated_1.Animated.parallel([s,r,o]).start(()=>{a(animationState_1.BlinkAnimationState.StartAnimation|animationState_1.BlinkAnimationState.Finished)})},[t,i,e,n]),c=(0,react_1.useCallback)(()=>{a(animationState_1.BlinkAnimationState.EndAnimation|animationState_1.BlinkAnimationState.Playing);const s=animated_1.Animated.spring(t,{toValue:1,...tds_easings_1.spring.quick,useNativeDriver:!0}),r=animated_1.Animated.spring(i,{toValue:0,...tds_easings_1.spring.slow,useNativeDriver:!0}),o=animated_1.Animated.spring(e,{toValue:0,...tds_easings_1.spring.slow,useNativeDriver:!0});animated_1.Animated.parallel([s,r,o]).start(()=>{a(animationState_1.BlinkAnimationState.EndAnimation|animationState_1.BlinkAnimationState.Finished)})},[t,i,e]);return(0,react_1.useMemo)(()=>({container:{transform:[{scale:t}]},dimmer:{opacity:i},gradient:{opacity:e,transform:[{scale:n},{translateY:animated_1.Animated.divide(animated_1.Animated.multiply(n,-l.height),2)}]},state:m,start:u,exit:c}),[t,i,m,c,l,e,n,u])};exports.useBlinkAnimation=useBlinkAnimation;
