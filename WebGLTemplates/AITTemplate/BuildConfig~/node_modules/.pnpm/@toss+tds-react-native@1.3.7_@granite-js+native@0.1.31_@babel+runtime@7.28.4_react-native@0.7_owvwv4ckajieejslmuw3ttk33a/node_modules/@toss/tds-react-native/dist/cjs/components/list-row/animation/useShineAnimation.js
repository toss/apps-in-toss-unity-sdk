"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useShineAnimation=void 0;const tds_easings_1=require("@toss/tds-easings"),react_1=require("react"),react_native_1=require("react-native"),animated_1=require("../../../interactions/animated"),animationState_1=require("./animationState"),sToMs_1=require("./sToMs"),useShineAnimation=({containerSize:i})=>{const s=i.height*3,t=(0,react_1.useRef)(new animated_1.Animated.Value(-s)).current,[d,m]=(0,react_1.useState)(animationState_1.ShineAnimationState.Idle);(0,react_1.useEffect)(()=>{t.setValue(-s)},[t,s]);const l=(0,react_1.useCallback)((n,o)=>{animated_1.Animated.loop(animated_1.Animated.sequence([animated_1.Animated.timing(t,{toValue:-s,duration:0,useNativeDriver:!0}),animated_1.Animated.timing(t,{toValue:i.width,duration:(0,sToMs_1.sToMs)(2.2),easing:react_native_1.Easing.bezier(.7,0,.7,1),useNativeDriver:!0}),animated_1.Animated.delay((0,sToMs_1.sToMs)(.1))]),{iterations:n}).start(o)},[t,s,i.width]),r=i.width*4,e=(0,react_1.useRef)(new animated_1.Animated.Value(-r*.75)).current,a=(0,react_1.useRef)(new animated_1.Animated.Value(0)).current;(0,react_1.useEffect)(()=>{e.setValue(-r*.75)},[e,r]);const c=(0,react_1.useCallback)((n,o)=>{const u=animated_1.Animated.sequence([animated_1.Animated.timing(e,{toValue:-r*.75,duration:0,useNativeDriver:!0}),animated_1.Animated.timing(e,{toValue:0,easing:react_native_1.Easing.bezier(.37,0,.63,1),duration:(0,sToMs_1.sToMs)(2.5),useNativeDriver:!0})]),g=animated_1.Animated.sequence([animated_1.Animated.timing(a,{toValue:0,duration:0,useNativeDriver:!0}),animated_1.Animated.timing(a,{toValue:1,duration:(0,sToMs_1.sToMs)(.9),easing:react_native_1.Easing.bezier(...tds_easings_1.bezier.linear),useNativeDriver:!0}),animated_1.Animated.timing(a,{toValue:0,duration:(0,sToMs_1.sToMs)(1.6),delay:(0,sToMs_1.sToMs)(.9),easing:react_native_1.Easing.bezier(...tds_easings_1.bezier.out),useNativeDriver:!0})]);animated_1.Animated.loop(animated_1.Animated.parallel([u,g]),{iterations:n}).start(o)},[a,e,r]);return(0,react_1.useMemo)(()=>{function n(o){return u=>{m(animationState_1.ShineAnimationState.Playing),o(u,()=>m(animationState_1.ShineAnimationState.Finished))}}return{state:d,light:{gradient:{transform:[{translateX:t},{translateY:-i.height}]},start:n(l)},dark:{gradient:{opacity:a,transform:[{translateX:e}]},start:n(c)}}},[i.height,d,t,l,a,e,c])};exports.useShineAnimation=useShineAnimation;
