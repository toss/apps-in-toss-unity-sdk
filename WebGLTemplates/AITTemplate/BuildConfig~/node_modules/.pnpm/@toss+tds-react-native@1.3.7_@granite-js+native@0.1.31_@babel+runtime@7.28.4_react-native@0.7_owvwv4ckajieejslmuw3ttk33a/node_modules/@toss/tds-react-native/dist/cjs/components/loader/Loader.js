"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const jsx_runtime_1=require("react/jsx-runtime"),react_native_svg_1=require("@granite-js/native/react-native-svg"),tds_colors_1=require("@toss/tds-colors"),react_1=require("react"),react_native_1=require("react-native"),core_1=require("../../core"),useAnnounce_1=require("../../utils/useAnnounce"),txt_1=require("../txt"),AnimatedView=react_native_1.Animated.createAnimatedComponent(react_native_1.View),AnimatedSvg=react_native_1.Animated.createAnimatedComponent(react_native_svg_1.Svg),AnimatedCircle=react_native_1.Animated.createAnimatedComponent(react_native_svg_1.Circle);function _Loader({size:e=DEFAULT_PROPS.size,type:t=DEFAULT_PROPS.type,customStrokeColor:n,customSize:s}){const a=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current,i=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current,r=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current,o=a.interpolate({inputRange:[0,1],outputRange:["0deg","360deg"]}),c=r.interpolate({inputRange:[0,1,2],outputRange:[180,45,180]}),l=i.interpolate({inputRange:[0,1,2],outputRange:["0deg","108deg","360deg"]}),d=n??strokeColorByType[t],u=s??sizeMap[e];return(0,react_1.useEffect)(()=>{react_native_1.Animated.loop(react_native_1.Animated.sequence([react_native_1.Animated.timing(r,{toValue:1,duration:900,useNativeDriver:!0,easing:react_native_1.Easing.inOut(react_native_1.Easing.ease)}),react_native_1.Animated.timing(r,{toValue:2,useNativeDriver:!0,duration:900,easing:react_native_1.Easing.inOut(react_native_1.Easing.ease)})]),{iterations:1/0}).start(),react_native_1.Animated.loop(react_native_1.Animated.sequence([react_native_1.Animated.timing(i,{toValue:1,duration:900,useNativeDriver:!0,easing:react_native_1.Easing.inOut(react_native_1.Easing.ease)}),react_native_1.Animated.timing(i,{toValue:2,useNativeDriver:!0,duration:900,easing:react_native_1.Easing.inOut(react_native_1.Easing.ease)})]),{iterations:1/0}).start(),react_native_1.Animated.loop(react_native_1.Animated.sequence([react_native_1.Animated.timing(a,{toValue:0,duration:0,useNativeDriver:!0,easing:react_native_1.Easing.linear}),react_native_1.Animated.timing(a,{toValue:1,duration:1800,useNativeDriver:!0,easing:react_native_1.Easing.linear})]),{iterations:1/0}).start()},[r,a,i]),(0,jsx_runtime_1.jsx)(AnimatedView,{style:{width:u,height:u,transform:[{rotate:l}]},children:(0,jsx_runtime_1.jsx)(AnimatedSvg,{width:u,height:u,viewBox:"0 0 66 66",stroke:d,style:[{transform:[{rotate:o}]}],children:(0,jsx_runtime_1.jsx)(AnimatedCircle,{fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30",strokeDashoffset:c,strokeDasharray:180})})})}function DelayLoader({delay:e=700,...t}){const n=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current;return(0,react_1.useEffect)(()=>{react_native_1.Animated.timing(n,{toValue:1,delay:e,duration:0,useNativeDriver:!0}).start()},[e,n]),(0,jsx_runtime_1.jsx)(AnimatedView,{style:{opacity:n},children:(0,jsx_runtime_1.jsx)(_Loader,{...t})})}function Loader({delay:e,label:t,size:n=DEFAULT_PROPS.size,type:s=DEFAULT_PROPS.type,style:a,...i}){const r=(0,core_1.useAdaptive)(),{announce:o}=(0,useAnnounce_1.useAnnounce)(),c=(0,react_1.useMemo)(()=>getLabelColorByType({grey800:r.grey800}),[r.grey800]);return(0,react_1.useEffect)(()=>{t!=null?o(t,{queue:!0,delay:200}):o("\uB85C\uB529\uC911\uC785\uB2C8\uB2E4",{queue:!0,delay:200})},[t,o]),(0,jsx_runtime_1.jsxs)(react_native_1.View,{style:[{alignItems:"center"},a],children:[e!=null?(0,jsx_runtime_1.jsx)(DelayLoader,{delay:e,size:n,type:s,...i}):(0,jsx_runtime_1.jsx)(_Loader,{size:n,type:s,...i}),t!=null?(0,jsx_runtime_1.jsx)(txt_1.Txt,{typography:"t6",color:c[s],style:{marginTop:spacingBySize[n]},children:t}):null]})}function CenteredLoader({style:e,...t}){return(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[{padding:40,alignItems:"center"},e],children:(0,jsx_runtime_1.jsx)(_Loader,{...t})})}function FullScreenLoader({style:e,...t}){return(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[{flex:1,justifyContent:"center",alignItems:"center"},e],children:(0,jsx_runtime_1.jsx)(Loader,{...t})})}const DEFAULT_PROPS={size:"large",type:"primary"},sizeMap={small:24,medium:36,large:48},strokeColorByType={primary:"#3188ff",dark:tds_colors_1.colors.grey600,light:tds_colors_1.colors.white},spacingBySize={small:12,medium:12,large:16},getLabelColorByType=({grey800:e})=>({primary:e,dark:e,light:tds_colors_1.colors.white});Loader.Delay=DelayLoader,Loader.FullScreen=FullScreenLoader,Loader.Centered=CenteredLoader,exports.default=Loader;
