"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,o,r){r===void 0&&(r=o);var n=Object.getOwnPropertyDescriptor(e,o);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,r,n)}:function(t,e,o,r){r===void 0&&(r=o),t[r]=e[o]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var r=[];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r[r.length]=n);return r},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var r=t(e),n=0;n<r.length;n++)r[n]!=="default"&&__createBinding(o,e,r[n]);return __setModuleDefault(o,e),o}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Radio=void 0,exports.RadioInput=RadioInput;const jsx_runtime_1=require("react/jsx-runtime"),tds_colors_1=require("@toss/tds-colors"),react_1=__importStar(require("react")),react_hook_form_1=require("react-hook-form"),react_native_1=require("react-native"),core_1=require("../../core"),RadioOption_1=__importDefault(require("./RadioOption")),defaultShadowStyle={shadowColor:"#000",shadowOffset:{width:1,height:1},shadowOpacity:.09,shadowRadius:1,elevation:1},DEFAULT_SPRING_CONFIG={stiffness:150,damping:20,mass:1,overshootClamping:!1,restSpeedThreshold:.001,restDisplacementThreshold:.001},TRANSITION_MULTIPLIER=1,Radio=({value:t,children:e,disabled:o=!1,onChange:r,horizontalMargin:n=0})=>{const[i,s]=(0,react_1.useState)(0),u=react_1.default.Children.map(e,a=>a.props),p=u.length,c=i/p,d=u.findIndex(a=>a.value===t),f=(0,react_1.useRef)(!0),l=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current,h=react_1.default.useCallback(a=>{r(a)},[r]),_=(0,react_1.useCallback)(a=>{react_native_1.Animated.spring(l,{toValue:a,useNativeDriver:!0,...DEFAULT_SPRING_CONFIG}).start()},[l]);(0,react_1.useEffect)(()=>{if(i===0)return;const a=d*(c*TRANSITION_MULTIPLIER);f.current===!0?(l.setValue(a),f.current=!1):_(a)},[d,c]);const g=(0,core_1.useAdaptive)(),{colorPreference:v}=(0,core_1.useColorPreference)();return(0,jsx_runtime_1.jsxs)(react_native_1.Animated.View,{style:[styles.defaultSegmentedControlWrapper,{backgroundColor:g.grey100,marginHorizontal:n}],onLayout:a=>{s(a.nativeEvent.layout.width)},accessibilityRole:"radiogroup",children:[(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:[styles.movingSegmentStyle,defaultShadowStyle,react_native_1.StyleSheet.absoluteFill,{backgroundColor:v==="light"?tds_colors_1.colors.inverseGrey900:tds_colors_1.colors.inverseGrey300,width:i/u.length-8},{transform:[{translateX:l}]}]}),react_1.default.Children.map(e,a=>react_1.default.cloneElement(a,{checked:a.props.value===t,disabled:a.props.disabled??o,onPress:h}))]})};exports.Radio=Radio;const styles=react_native_1.StyleSheet.create({defaultSegmentedControlWrapper:{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",borderRadius:24,height:48},movingSegmentStyle:{top:0,marginVertical:4,marginHorizontal:4,borderRadius:20}});function RadioInput({controlerProps:t,control:e,name:o,children:r,...n}){const{field:i}=(0,react_hook_form_1.useController)({control:e,name:o,...t});return(0,jsx_runtime_1.jsx)(Radio,{horizontalMargin:n.horizontalMargin,value:i.value,onChange:s=>{i.onChange(s),n.onChange?.(s)},children:r})}Radio.Option=RadioOption_1.default;
