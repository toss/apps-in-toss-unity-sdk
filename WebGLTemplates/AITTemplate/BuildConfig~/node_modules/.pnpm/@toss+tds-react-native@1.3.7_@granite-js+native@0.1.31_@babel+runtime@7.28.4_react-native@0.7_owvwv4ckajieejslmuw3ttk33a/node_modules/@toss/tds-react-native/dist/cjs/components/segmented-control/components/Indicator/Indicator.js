"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Indicator=Indicator;const jsx_runtime_1=require("react/jsx-runtime"),tds_easings_1=require("@toss/tds-easings"),react_1=require("react"),react_native_1=require("react-native"),core_1=require("../../../../core"),AlignmentContext_1=require("../../contexts/AlignmentContext"),IndicatorContext_1=require("../../contexts/IndicatorContext"),RadioContext_1=require("../../contexts/RadioContext"),useIndicatorBackground_1=require("../../hooks/useIndicatorBackground"),useIndicatorStyle_1=require("./useIndicatorStyle");function Indicator({style:s,children:a}){const{indicatorX:c,setIndicatorX:n,indicatorWidth:d,setIndicatorWidth:r}=(0,react_1.useContext)(IndicatorContext_1.IndicatorContext),{selectedElementLayout:t}=(0,react_1.useContext)(RadioContext_1.RadioContext),{indicatorStyle:u}=(0,useIndicatorStyle_1.useIndicatorStyle)(),{colorPreference:l}=(0,core_1.useColorPreference)(),{alignment:g}=(0,react_1.useContext)(AlignmentContext_1.AlignmentContext),x=(0,useIndicatorBackground_1.useIndicatorBackground)(),i=(0,react_1.useRef)(!0),o=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current,e=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current,h=e.interpolate({inputRange:[0,1],outputRange:[c,t?.x??0]}),f=e.interpolate({inputRange:[0,1],outputRange:[d,t?.width??0]});(0,react_1.useEffect)(()=>{t!=null&&(i.current===!0?(r(t.width),n(t.x),i.current=!1,react_native_1.Animated.spring(o,{toValue:1,useNativeDriver:!1,...tds_easings_1.spring.quick}).start()):(e.setValue(0),react_native_1.Animated.spring(e,{toValue:1,useNativeDriver:!1,...tds_easings_1.spring.quick}).start(()=>{n(t.x),r(t.width)})))},[t,o,e,r,n]);const p={zIndex:0,top:g==="fluid"?0:void 0,height:t?.height,backgroundColor:x,width:f,opacity:o,transform:[{translateX:h}]};return(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:[u,p,{shadowColor:l==="light"?"rgba(0, 0, 0, 0.09)":"rgba(1, 1, 1, 0.09)",shadowOffset:{width:0,height:0},shadowOpacity:1,shadowRadius:2},s],children:a})}
