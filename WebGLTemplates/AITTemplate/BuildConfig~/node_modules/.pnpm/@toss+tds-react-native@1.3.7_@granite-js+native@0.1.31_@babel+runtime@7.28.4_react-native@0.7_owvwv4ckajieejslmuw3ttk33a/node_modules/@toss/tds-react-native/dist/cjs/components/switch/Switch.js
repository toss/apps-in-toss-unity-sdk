"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const jsx_runtime_1=require("react/jsx-runtime"),tds_colors_1=require("@toss/tds-colors"),react_1=require("react"),react_native_1=require("react-native"),animation_1=require("../../interactions/animation"),pressable_effect_1=require("../../interactions/pressable-effect"),utils_1=require("../../utils"),useSwitchAnimation_1=require("./useSwitchAnimation");function Switch({checked:r,defaultChecked:c=!1,disabled:e,style:a,onPress:n,onCheckedChange:i,accessibilityState:l,...u}){const[t,o]=(0,utils_1.useControlled)({controlledValue:r,defaultValue:c}),{reduceMotionEnabled:f}=(0,utils_1.useAccessibilityInfo)(),s=(0,react_1.useMemo)(()=>t===!0?"on":"off",[t]),{backgroundStyle:m,animatedKnobStyle:d,startSwitchOnAnimation:h,startSwitchOffAnoimation:y}=(0,useSwitchAnimation_1.useSwitchAnimation)({animationState:s,disabled:e}),{startPressInAnim:S,startPressOutAnim:A,scaleAnim:w}=(0,pressable_effect_1.usePressAnim)({pressIn:{scale:.96,opacity:1},pressOut:{scale:1,opacity:1}}),{startWiggle:_,style:p}=(0,animation_1.useWiggleAnimation)({direction:"x",type:"small"}),b=(0,react_1.useCallback)(g=>{e||(n?.(g),i?.(!t),o(!t))},[t,e,n,i,o]);return(0,react_1.useEffect)(()=>{s==="on"?h():y()},[s]),(0,jsx_runtime_1.jsx)(react_native_1.Pressable,{onPress:b,onPressIn:e?_:S,onPressOut:e?void 0:A,style:[styles.container,a],accessibilityRole:"switch",accessible:!0,accessibilityState:{checked:t,disabled:e,...l},...u,children:(0,jsx_runtime_1.jsxs)(react_native_1.Animated.View,{style:[react_native_1.Platform.OS==="ios"?{opacity:e?.3:1}:void 0,f?void 0:w,e?p:void 0],children:[(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:[m,{width:WIDTH,height:HEIGHT,borderRadius:RADIUS}]}),(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:[styles.knob,d]})]})})}const WIDTH=50,HEIGHT=30,RADIUS=15,styles=react_native_1.StyleSheet.create({container:{alignSelf:"flex-start"},knob:{width:16,height:16,backgroundColor:tds_colors_1.colors.white,borderRadius:8,position:"absolute",left:7,top:7}});exports.default=Switch;
