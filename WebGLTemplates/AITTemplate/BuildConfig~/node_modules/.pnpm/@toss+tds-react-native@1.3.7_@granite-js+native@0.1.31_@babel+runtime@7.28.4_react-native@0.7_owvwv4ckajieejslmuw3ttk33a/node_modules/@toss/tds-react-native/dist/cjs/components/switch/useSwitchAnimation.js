"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.useSwitchAnimation=useSwitchAnimation;const tds_colors_1=require("@toss/tds-colors"),hex_to_rgba_1=__importDefault(require("hex-to-rgba")),react_1=require("react"),react_native_1=require("react-native"),core_1=require("../../core");function useSwitchAnimation({animationState:e,disabled:o}){const s=(0,core_1.useAdaptive)(),i=(0,react_1.useMemo)(()=>({grey200:(0,hex_to_rgba_1.default)(s.grey200??tds_colors_1.colors.grey200,react_native_1.Platform.OS==="android"&&o?.3:1),blue500:(0,hex_to_rgba_1.default)(tds_colors_1.colors.blue500,react_native_1.Platform.OS==="android"&&o?.3:1)}),[s.grey200,o]),a=(0,react_1.useRef)(new react_native_1.Animated.Value(e==="on"?1:0)).current,r=(0,react_1.useRef)(new react_native_1.Animated.Value(animationConfig.handler[e].translateX)).current,n=(0,react_1.useRef)(new react_native_1.Animated.Value(animationConfig.handler[e].scale)).current,t=!1,l=(0,react_1.useCallback)(()=>{react_native_1.Animated.parallel([react_native_1.Animated.spring(r,{toValue:animationConfig.handler.on.translateX,useNativeDriver:t,...SPRING_CONFIG}),react_native_1.Animated.spring(n,{toValue:animationConfig.handler.on.scale,useNativeDriver:t,...SPRING_CONFIG}),react_native_1.Animated.spring(a,{toValue:1,useNativeDriver:t,...SPRING_CONFIG})]).start()},[n,r,a,t]),u=(0,react_1.useCallback)(()=>{react_native_1.Animated.parallel([react_native_1.Animated.spring(r,{toValue:animationConfig.handler.off.translateX,useNativeDriver:t,...SPRING_CONFIG}),react_native_1.Animated.spring(n,{toValue:animationConfig.handler.off.scale,useNativeDriver:t,...SPRING_CONFIG}),react_native_1.Animated.spring(a,{toValue:0,useNativeDriver:t,...SPRING_CONFIG})]).start()},[n,r,a,t]);return{backgroundStyle:{backgroundColor:a.interpolate({inputRange:[0,1],outputRange:[i.grey200,i.blue500]})},animatedKnobStyle:{transform:[{translateX:r},{scale:n}]},startSwitchOnAnimation:l,startSwitchOffAnoimation:u}}const animationConfig={handler:{on:{scale:1.5,translateX:20},off:{scale:1,translateX:0}}},SPRING_CONFIG={stiffness:1e3,damping:52};
