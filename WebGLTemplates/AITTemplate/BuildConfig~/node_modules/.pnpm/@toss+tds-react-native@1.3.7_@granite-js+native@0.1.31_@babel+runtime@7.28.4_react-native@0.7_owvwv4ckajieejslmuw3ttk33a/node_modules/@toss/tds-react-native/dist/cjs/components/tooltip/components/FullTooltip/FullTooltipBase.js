"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(n,e,i,o){o===void 0&&(o=i);var t=Object.getOwnPropertyDescriptor(e,i);(!t||("get"in t?!e.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(n,o,t)}:function(n,e,i,o){o===void 0&&(o=i),n[o]=e[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),__importStar=this&&this.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(i){var o=[];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(o[o.length]=t);return o},n(e)};return function(e){if(e&&e.__esModule)return e;var i={};if(e!=null)for(var o=n(e),t=0;t<o.length;t++)o[t]!=="default"&&__createBinding(i,e,o[t]);return __setModuleDefault(i,e),i}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.ANCHOR_WIDTH=exports.ANCHOR_HEIGHT=void 0,exports.FullTooltipBase=FullTooltipBase;const jsx_runtime_1=require("react/jsx-runtime"),react_native_svg_1=require("@granite-js/native/react-native-svg"),tds_colors_1=require("@toss/tds-colors"),tds_easings_1=require("@toss/tds-easings"),utils_1=require("@toss/utils"),react_1=require("react"),react_native_1=require("react-native"),animated_1=require("../../../../interactions/animated"),useAnnounce_1=require("../../../../utils/useAnnounce"),Paragraph=__importStar(require("../../../paragraph")),createFullTooltipAnchorPath_1=require("../../utils/createFullTooltipAnchorPath"),HiddenFullTooltip_1=require("./HiddenFullTooltip");exports.ANCHOR_HEIGHT=12,exports.ANCHOR_WIDTH=38;function FullTooltipBase({open:n,placement:e,anchorMarginLeft:i=0,messageAlign:o="center",message:t,style:r,animationDelay:s=0,withAnimation:c=!0,anchorOverlapped:u=!1}){const[l,d]=(0,react_1.useState)(0),a=c?s:0,f=c?200:0,{announce:p}=(0,useAnnounce_1.useAnnounce)(),{fullMessageStyle:_,fullTooltipStyle:H,enterMotion:g,exitMotion:h}=useFullTooltipAnimation({messageHeight:l,delay:a,duration:f,anchorOverlapped:u});return(0,react_1.useEffect)(()=>{n?g():h()},[g,h,n]),(0,react_1.useEffect)(()=>{n&&t&&p(t,{queue:!0,delay:a+200})},[n,t,p,a]),l===0?(0,jsx_runtime_1.jsx)(HiddenFullTooltip_1.HiddenFullTooltip,{message:t,onLayout:A=>{d(A.nativeEvent.layout.height)}}):(0,jsx_runtime_1.jsxs)(animated_1.Animated.View,{style:[{position:"relative",width:"100%"},H,r],children:[e==="bottom"?(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[{height:exports.ANCHOR_HEIGHT},u?{position:"absolute",top:-exports.ANCHOR_HEIGHT,width:"100%",left:0}:void 0],children:(0,jsx_runtime_1.jsx)(FullTooltipAnchor,{anchorMarginLeft:i,messageHeight:l})}):void 0,(0,jsx_runtime_1.jsx)(animated_1.Animated.View,{style:{backgroundColor:(0,utils_1.hexToRgba)(tds_colors_1.colors.teal400,.15)},children:(0,jsx_runtime_1.jsx)(animated_1.Animated.View,{style:[_,{width:"100%",paddingVertical:16,paddingHorizontal:24}],children:(0,jsx_runtime_1.jsx)(Paragraph.Text,{typography:"t6",color:tds_colors_1.colors.teal600,fontWeight:"bold",style:{textAlign:o},children:t})})}),e==="top"?(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[{height:exports.ANCHOR_HEIGHT,transform:[{scaleY:-1}]},u?{position:"absolute",width:"100%",bottom:-exports.ANCHOR_HEIGHT}:void 0],children:(0,jsx_runtime_1.jsx)(FullTooltipAnchor,{anchorMarginLeft:i,messageHeight:l})}):void 0]})}const easeOut=react_native_1.Easing.bezier(...tds_easings_1.bezier.out);function useFullTooltipAnimation({messageHeight:n,delay:e,duration:i,anchorOverlapped:o}){const t=(0,react_1.useRef)(new animated_1.Animated.Value(0)).current,r=(0,react_1.useRef)(new animated_1.Animated.Value(0)).current,s=(0,react_1.useRef)(new animated_1.Animated.Value(0)).current,c={opacity:t},u={height:r,opacity:s},l=(0,react_1.useCallback)(()=>{const a={easing:easeOut,duration:i};animated_1.Animated.sequence([animated_1.Animated.delay(e),animated_1.Animated.parallel([animated_1.Animated.timing(s,{toValue:1,delay:.5,useNativeDriver:!1,...a}),animated_1.Animated.timing(t,{toValue:1,delay:.5,useNativeDriver:!1,...a}),animated_1.Animated.spring(r,{toValue:n+exports.ANCHOR_HEIGHT,useNativeDriver:!1,...tds_easings_1.spring.basic})])]).start()},[e,i,t,r,s,n]),d=(0,react_1.useCallback)(()=>{animated_1.Animated.parallel([animated_1.Animated.timing(s,{toValue:0,easing:easeOut,duration:i,useNativeDriver:!1}),animated_1.Animated.timing(t,{toValue:0,easing:easeOut,duration:i,useNativeDriver:!1}),animated_1.Animated.spring(r,{toValue:o?exports.ANCHOR_HEIGHT:0,useNativeDriver:!1,...tds_easings_1.spring.basic})]).start()},[o,i,t,r,s]);return{fullMessageStyle:c,fullTooltipStyle:u,enterMotion:l,exitMotion:d}}function FullTooltipAnchor({messageHeight:n,anchorMarginLeft:e}){const i=(0,react_1.useMemo)(()=>(0,createFullTooltipAnchorPath_1.createTooltipOutlinePath)({anchorPosition:e,height:n,width:react_native_1.Dimensions.get("window").width}),[n,e]);return(0,jsx_runtime_1.jsx)(react_native_svg_1.Svg,{width:"100%",height:exports.ANCHOR_HEIGHT,viewBox:`0 0 100 ${exports.ANCHOR_HEIGHT}`,children:(0,jsx_runtime_1.jsx)(react_native_svg_1.Path,{d:i,fill:(0,utils_1.hexToRgba)(tds_colors_1.colors.teal400,.15)})})}
