"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var e=Object.getOwnPropertyDescriptor(t,r);(!e||("get"in e?!t.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,e)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),__importStar=this&&this.__importStar||function(){var n=function(t){return n=Object.getOwnPropertyNames||function(r){var o=[];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(o[o.length]=e);return o},n(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var o=n(t),e=0;e<o.length;e++)o[e]!=="default"&&__createBinding(r,t,o[e]);return __setModuleDefault(r,t),r}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.TooltipBase=void 0,exports.getTooltipStyle=getTooltipStyle;const jsx_runtime_1=require("react/jsx-runtime"),tds_colors_1=require("@toss/tds-colors"),tds_easings_1=require("@toss/tds-easings"),react_1=require("react"),react_native_1=require("react-native"),core_1=require("../../../../core"),animated_1=require("../../../../interactions/animated"),rally_1=require("../../../../interactions/rally"),useAnnounce_1=require("../../../../utils/useAnnounce"),Paragraph=__importStar(require("../../../paragraph")),TooltipContext_1=require("../../contexts/TooltipContext"),Anchor_1=require("./Anchor"),AnimatedPressable=animated_1.Animated.createAnimatedComponent(react_native_1.Pressable);exports.TooltipBase=(0,react_1.forwardRef)(function({size:t="medium",placement:r,anchorMarginLeft:o=0,message:e,motion:f,messageAlign:d="left",contentHeight:g,left:p,top:h,onPress:y},m){const c=(0,core_1.useAdaptive)(),{colorPreference:_}=(0,core_1.useColorPreference)(),{flipped:l}=(0,TooltipContext_1.useTooltip)(),{announce:u}=(0,useAnnounce_1.useAnnounce)(),i=(0,react_1.useMemo)(()=>getTooltipStyle(t),[t]),a=r==="bottom"?"top":"bottom",s=(0,rally_1.useRally)({motion:f==="strong"?[{opacity:{from:0,to:1},scale:{from:0,to:1.25},transformOriginX:{from:"center",to:"center"},transformOriginY:{from:a,to:a},easing:tds_easings_1.spring.quick},{scale:{from:1.25,to:1},transformOriginX:{from:"center",to:"center"},transformOriginY:{from:a,to:a},easing:{stiffness:300,damping:15}}]:{opacity:{from:0,to:1},scale:{from:0,to:1},transformOriginX:{from:"center",to:"center"},transformOriginY:{from:a,to:a},easing:tds_easings_1.spring.medium},exit:{opacity:{from:1,to:0},scale:{from:1,to:0},transformOriginX:{from:"center",to:"center"},transformOriginY:{from:a,to:a},easing:tds_easings_1.spring.medium}});return(0,react_1.useEffect)(()=>{s.play()},[s]),(0,react_1.useEffect)(()=>{e&&u(e,{queue:!0,delay:100})},[e,u]),(0,jsx_runtime_1.jsxs)(AnimatedPressable,{ref:m,onPress:y,onLayout:b=>{s.onLayout(b)},style:[{opacity:0,transform:[{scale:0}],zIndex:9e3,position:"absolute",backgroundColor:c.floatBackground,borderRadius:i.borderRadius,paddingHorizontal:i.paddingHorizontal/2,paddingVertical:i.paddingVertical/2,shadowColor:_==="light"?react_native_1.Platform.OS==="ios"?tds_colors_1.colors.greyOpacity500:void 0:tds_colors_1.colors.greyOpacity900,shadowOffset:{width:0,height:l?-16:16},shadowOpacity:1,shadowRadius:60,elevation:40,left:p,top:h},s.style],children:[(0,jsx_runtime_1.jsx)(react_native_1.View,{style:{position:"absolute",justifyContent:"center",alignItems:"center",top:r==="top"?g-4:-i.anchorHeight+2,left:o,width:i.anchorWidth,height:i.anchorHeight+2,transform:r==="top"?[{scaleY:-1}]:[]},children:(0,jsx_runtime_1.jsx)(Anchor_1.Anchor,{size:t})}),(0,jsx_runtime_1.jsx)(react_native_1.View,{style:{flexDirection:"row",justifyContent:"center",alignSelf:"flex-start",transform:[{scaleY:l?-1:1}]},children:(0,jsx_runtime_1.jsx)(Paragraph.Text,{typography:i.typography,color:c.grey800,fontWeight:i.fontWeight,style:{textAlign:d},children:e})})]})});function getTooltipStyle(n){return n==="small"?{borderRadius:12,paddingVertical:16,paddingHorizontal:24,anchorHeight:9,anchorWidth:24,typography:"t7",fontWeight:"semiBold"}:n==="large"?{borderRadius:18,paddingVertical:26,paddingHorizontal:40,anchorHeight:12,anchorWidth:38,typography:"t5",fontWeight:"bold"}:{borderRadius:16,paddingVertical:26,paddingHorizontal:32,anchorHeight:12,anchorWidth:38,typography:"t6",fontWeight:"bold"}}
