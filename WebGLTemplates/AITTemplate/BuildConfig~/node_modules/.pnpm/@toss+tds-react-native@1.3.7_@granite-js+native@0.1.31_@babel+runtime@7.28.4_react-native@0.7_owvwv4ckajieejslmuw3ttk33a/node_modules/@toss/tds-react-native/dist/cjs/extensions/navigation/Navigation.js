"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationIconButton=void 0,exports.Navigation=Navigation,exports.useBackOrCloseNavigation=useBackOrCloseNavigation,exports.NavigationLeft=NavigationLeft,exports.NavigationRight=NavigationRight,exports.NavigationRightWrapper=NavigationRightWrapper,exports.NavigationContent=NavigationContent,exports.NavigationTitleIcon=NavigationTitleIcon,exports.NavigationTitleText=NavigationTitleText,exports.NavigationBackButton=NavigationBackButton;const jsx_runtime_1=require("react/jsx-runtime"),native_1=require("@granite-js/native/@react-navigation/native"),react_native_1=require("@granite-js/react-native"),tds_colors_1=require("@toss/tds-colors"),react_1=require("react"),react_native_2=require("react-native"),asset_1=require("../../components/asset"),navbar_1=require("../../components/navbar"),txt_1=require("../../components/txt"),constants_1=require("../../constants"),core_1=require("../../core"),useTypographyLevel_1=require("../../core/hooks/useTypographyLevel"),top_navigation_1=require("../top-navigation");function hasValidChild(t){return react_1.Children.toArray(t).length>0}function Navigation({children:t}){const e=(0,native_1.useNavigation)(),n=(0,core_1.useAdaptive)(),{colorPreference:i}=(0,core_1.useColorPreference)(),o=hasValidChild(t);return(0,react_1.useLayoutEffect)(()=>{function a(){e.setOptions({headerStyle:null,statusBarStyle:"auto"})}if(!o){a();return}return e.setOptions({headerStyle:{backgroundColor:n.background},statusBarStyle:i==="dark"?"light":"dark"}),()=>{a()}},[n.background,i,o,e]),(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:t})}function useBackOrCloseNavigation(){const t=(0,native_1.useNavigation)();return(0,react_1.useCallback)(()=>{t.canGoBack()?t.goBack():(0,react_native_1.closeView)()},[t])}function NavigationLeft({children:t,visible:e=!0}){const n=(0,native_1.useNavigation)();return(0,react_1.useLayoutEffect)(()=>{if(!hasValidChild(t)||!e){n.setOptions({headerLeft:null});return}n.setOptions({headerLeft:()=>(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:t})})},[t,n,e]),null}function NavigationRight({children:t,visible:e=!0}){const n=(0,native_1.useNavigation)();return(0,react_1.useLayoutEffect)(()=>{if(!hasValidChild(t)||!e){n.setOptions({headerRight:null});return}n.setOptions({headerRight:()=>(0,jsx_runtime_1.jsx)(NavigationRightWrapper,{children:t})})},[t,n,e]),null}function NavigationRightWrapper({children:t}){return(0,jsx_runtime_1.jsx)(react_native_2.View,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4,marginLeft:4,marginRight:-4},children:t})}const DEVICE_WIDTH=react_native_2.Dimensions.get("window").width;function NavigationContent({children:t,visible:e=!0,onPressTitle:n,horizontalSafeMargin:i=0,theme:o="light",withHome:a=!1,leftVisible:u}){const r=(0,native_1.useNavigation)(),s=(0,react_1.useMemo)(()=>a?{height:34,paddingLeft:12,paddingRight:10,maxWidth:DEVICE_WIDTH-i,backgroundColor:top_navigation_1.COLOR_PALETTE[o].backgroundColor,borderRadius:99}:void 0,[a,i,o]),c=u?react_native_2.Platform.OS==="ios"?-4:0:a?-4:8;return(0,react_1.useLayoutEffect)(()=>{if(!hasValidChild(t)||!e){r.setOptions({headerBackVisible:!1,headerTitle:null});return}r.setOptions({headerTitleAlign:"center",headerBackVisible:!1,headerTitle:()=>(0,jsx_runtime_1.jsx)(react_native_2.View,{style:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",flex:1,marginLeft:c,alignSelf:"flex-start"},children:(0,jsx_runtime_1.jsx)(react_native_2.View,{style:{flexDirection:"row",alignItems:"center",gap:6,maxWidth:DEVICE_WIDTH-i},children:n?(0,jsx_runtime_1.jsx)(react_native_2.TouchableOpacity,{onPress:n,style:[{flexDirection:"row",alignItems:"center",gap:6},s],children:t}):t})}),headerTintColor:tds_colors_1.colors.grey900})},[t,i,r,n,e,s,c]),null}function NavigationTitleIcon(t){const e=(0,useTypographyLevel_1.useTypographyLevel)(),i=(0,constants_1.getTypographyMap)(e).t6.fontSize,o={width:18,height:18,radius:6};return i>=22&&t.name!=="icon-home-mono"?null:t.name!==void 0?(0,jsx_runtime_1.jsx)(asset_1.Asset.Icon,{name:t.name,frameShape:o}):(0,jsx_runtime_1.jsx)(react_native_2.Image,{source:t.source,style:{overflow:"hidden",borderRadius:o.radius,width:o.width,height:o.height}})}function NavigationTitleText({style:t,theme:e="light",...n}){const i=(0,useTypographyLevel_1.useTypographyLevel)(),o=(0,useTypographyLevel_1.capTypographyLevel)(i,135),a=(0,constants_1.getTypographyMap)(o);return(0,jsx_runtime_1.jsx)(txt_1.Txt,{fontWeight:"semibold",style:{fontSize:a.t6.fontSize,lineHeight:a.t6.lineHeight},color:top_navigation_1.COLOR_PALETTE[e].titleTextColor,numberOfLines:1,ellipsizeMode:"tail",...n})}function NavigationBackButton({onPress:t,canGoBack:e=!0,theme:n="light"}){const i=useBackOrCloseNavigation();return(0,jsx_runtime_1.jsx)(navbar_1.ReactNavigationNavbar.BackButton,{tintColor:top_navigation_1.COLOR_PALETTE[n].titleTextColor,accessibilityRole:"button",accessible:!0,accessibilityLabel:e?"\uB4A4\uB85C\uAC00\uAE30":"\uB2EB\uAE30",onPress:()=>{t?.(),e&&i()}})}exports.NavigationIconButton=(0,react_1.forwardRef)(function(e,n){return(0,jsx_runtime_1.jsx)(navbar_1.ReactNavigationNavbar.RightIconButton,{ref:n,...e})});
