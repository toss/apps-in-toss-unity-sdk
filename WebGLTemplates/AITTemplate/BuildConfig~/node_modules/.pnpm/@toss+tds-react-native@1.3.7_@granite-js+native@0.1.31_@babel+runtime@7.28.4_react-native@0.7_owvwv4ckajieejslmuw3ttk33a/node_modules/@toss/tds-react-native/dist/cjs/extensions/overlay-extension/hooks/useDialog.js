"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useDialog=useDialog;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),dialog_1=require("../../../components/dialog"),core_1=require("../../../core");function useDialog(g={}){const o=(0,core_1.useOverlay)(),f=(0,react_1.useCallback)(()=>{o.close()},[o]),{closeOnDestroy:m=!0}=g,d=(0,react_1.useCallback)(({closeOnDimmerClick:s=!1,onEntered:r,onButtonPress:c,...u})=>new Promise(i=>{o.open(({isOpen:n,close:e,exit:t})=>(0,jsx_runtime_1.jsx)(dialog_1.AlertDialog,{...u,open:n,onEntered:r,onClose:()=>{i(),e()},onButtonPress:()=>{c?.(),i(),e()},onExited:()=>{t()},closeOnDimmerClick:s}))}),[o]),C=(0,react_1.useCallback)(({rightButton:s="\uD655\uC778",leftButton:r="\uCDE8\uC18C",closeOnDimmerClick:c=!1,onEntered:u,...i})=>{const n=typeof s=="string"?(0,jsx_runtime_1.jsx)(dialog_1.ConfirmDialog.Button,{children:s}):s,e=typeof r=="string"?(0,jsx_runtime_1.jsx)(dialog_1.ConfirmDialog.Button,{children:r}):r;return new Promise(t=>{o.open(({isOpen:x,close:a,exit:P})=>(0,jsx_runtime_1.jsx)(dialog_1.ConfirmDialog,{...i,open:x,onEntered:u,onClose:()=>{t(!1),a()},onExited:()=>{P()},rightButton:(0,react_1.cloneElement)(n,{...n.props,onPress:p=>{t(!0),n.props.onPress===void 0?a():n.props.onPress(p)}}),leftButton:(0,react_1.cloneElement)(e,{...e.props,type:"dark",style:"weak",onPress:p=>{t(!1),e.props.onPress===void 0?a():e.props.onPress(p)}}),closeOnDimmerClick:c}))})},[o]),l=(0,react_1.useMemo)(()=>({close:f,openAlert:d,openConfirm:C}),[f,d,C]);return(0,react_1.useEffect)(()=>()=>{m&&l?.close()},[m,l]),l}
