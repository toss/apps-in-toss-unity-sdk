"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PressableEffect=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),react_native_1=require("react-native"),Prerender_1=require("./Prerender"),PressableUnderlay_1=require("./PressableUnderlay"),usePressAnim_1=require("./usePressAnim"),a11y_1=require("../../utils/a11y"),_PressableEffect=(0,react_1.forwardRef)((e,s)=>e.onPress==null?(0,jsx_runtime_1.jsx)(react_native_1.View,{ref:s,...e,children:e.children}):(0,jsx_runtime_1.jsx)(Prerender_1.Prerender,{initial:(0,jsx_runtime_1.jsx)(LightPressableEffect,{onPress:e.onPress,children:e.children,style:e.style}),children:(0,jsx_runtime_1.jsx)(HeavyPressableEffect,{ref:s,...e})})),LightPressableEffect=({onPress:e,style:s,children:t})=>(0,jsx_runtime_1.jsx)(react_native_1.TouchableOpacity,{role:e!=null?"button":void 0,style:s,onPress:e,children:t}),HeavyPressableEffect=(0,react_1.forwardRef)(({children:e,underlay:s=(0,jsx_runtime_1.jsx)(PressableUnderlay_1.PressableUnderlay,{style:styles.underlay}),style:t,onPress:r,onPressIn:l,onPressOut:a,...u},o)=>{const{scaleAnim:d,opacityAnim:y,startPressInAnim:c,startPressOutAnim:i}=(0,usePressAnim_1.usePressAnim)({pressIn:{scale:.96,opacity:1},pressOut:{scale:1,opacity:0}}),P=(0,react_1.useCallback)(n=>{l?.(n),r!=null&&c()},[l,r,c]),f=(0,react_1.useCallback)(n=>{a?.(n),r!=null&&i()},[a,r,i]);return(0,jsx_runtime_1.jsx)(react_native_1.Pressable,{ref:o,onPress:r,onPressIn:P,onPressOut:f,style:t,...(0,a11y_1.generateA11yRestProps)(u,{role:"button"}),children:(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:{transform:[{scale:d}]},children:(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[s!=null?(0,react_1.cloneElement)(s,{...s.props,style:[s.props.style,{opacity:y}]}):null,e]})})})}),styles=react_native_1.StyleSheet.create({underlay:{borderRadius:12}});exports.PressableEffect=Object.assign(_PressableEffect,{Underlay:PressableUnderlay_1.PressableUnderlay});
