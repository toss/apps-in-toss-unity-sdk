"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PresenceChild=PresenceChild;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),getUniqueId_1=require("../helper/getUniqueId"),PresenceContext_1=require("../contexts/PresenceContext");function PresenceChild(e){const s=(0,react_1.useRef)((0,getUniqueId_1.getUniqueId)()).current,t=(0,react_1.useRef)(new Map).current,i=(0,react_1.useMemo)(()=>({id:s,present:e.present,onExitComplete:n=>{t.set(n,!0);for(const r of t.values())if(!r)return;e.onExitEnd&&e.onExitEnd()},register:n=>(t.set(n,!1),()=>t.delete(n))}),[e.present]);return(0,react_1.useMemo)(()=>{t.forEach((n,r)=>t.set(r,!1))},[e.present]),(0,react_1.useEffect)(()=>{!e.present&&!t.size&&e.onExitEnd&&e.onExitEnd()},[e.present]),(0,jsx_runtime_1.jsx)(PresenceContext_1.PresenceContext.Provider,{value:i,children:e.children})}
