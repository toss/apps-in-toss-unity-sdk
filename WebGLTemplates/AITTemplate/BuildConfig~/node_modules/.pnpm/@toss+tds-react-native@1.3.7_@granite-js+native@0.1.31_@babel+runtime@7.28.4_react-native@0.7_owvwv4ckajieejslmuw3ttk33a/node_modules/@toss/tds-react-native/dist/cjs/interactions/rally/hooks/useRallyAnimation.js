"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useRallyAnimation=useRallyAnimation;const react_1=require("react"),react_native_1=require("react-native"),operations_1=require("../operations"),useCurrentProgressStyle_1=require("./useCurrentProgressStyle");function useRallyAnimation({motionInputs:o,layout:a}){const r=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current,l=(0,useCurrentProgressStyle_1.useCurrentProgressStyleIndex)(r,{motionLength:o.length}),t=(0,react_1.useMemo)(()=>(0,operations_1.toMotions)(o,a),[o,a]),s=(0,react_1.useMemo)(()=>t.map((e,n)=>{const g=(0,operations_1.createInterpolationStyle)(r,{motion:e,inputRange:[n,n+1]}),m=(0,operations_1.createMotionAnimation)({progress:r,toValue:n+1,motion:e}),p=(0,operations_1.createMotionAnimation)({progress:r,toValue:n,motion:e});return{style:g,forward:(0,operations_1.toAnimationController)(m,{progress:r,endProgress:t.length}),backward:(0,operations_1.toAnimationController)(p,{progress:r,endProgress:t.length})}}),[t,r]),c=operations_1.Animation.sequence(s.map(e=>e.forward)),i=operations_1.Animation.sequence([...s.map(e=>e.backward).reverse()]),u=s.map(e=>e.style)[l];return(0,react_1.useMemo)(()=>({forward:c,backward:i,style:u}),[c,i,u])}
