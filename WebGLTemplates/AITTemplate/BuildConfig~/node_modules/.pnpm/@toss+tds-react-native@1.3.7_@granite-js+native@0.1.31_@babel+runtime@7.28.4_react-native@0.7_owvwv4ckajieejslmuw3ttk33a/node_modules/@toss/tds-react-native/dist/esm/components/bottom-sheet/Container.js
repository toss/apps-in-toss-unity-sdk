"use strict";import{jsx as m}from"react/jsx-runtime";import{spring as H}from"@toss/tds-easings";import{useCallback as W,useEffect as c,useRef as u}from"react";import{Animated as s,Keyboard as h,Platform as g,StyleSheet as j,useWindowDimensions as F}from"react-native";import{useAdaptive as O,useTypographyTheme as P}from"../../core";import{useSafeAreaBottom as R}from"../../utils";import{BottomSheetDragAnimation as Y}from"./DragAnimation";import{usePreservedCallback as _}from"./utils/usePreservedCallback";const f=10,q=()=>{};export function BottomSheetContainer({open:e,children:v,onDragFinished:y,onDragToClose:b,onDraggedDown:w,onDraggedMiddle:S,onDraggedUp:D,onExited:A,style:k,unstable_disableDragging:T=!1}){const o=F(),x=O(),d=_(A??q),B=u(0),i=u(new s.Value(o.height)).current,n=R()||f,{typographyLevel:l}=P(),C=g.OS==="android"?l>150:l?.startsWith("A11y"),L=o.height*(C?.9:.7),t=W(({moveTo:r})=>s.spring(i,{toValue:r,useNativeDriver:!0,...H.quick}),[i]);return c(()=>{if(e)return t({moveTo:-n}).start(),()=>{t({moveTo:o.height}).start(()=>{d?.()})}},[t,o.height,d,e,n]),c(()=>{if(!e||g.OS!=="ios")return;const r=h.addListener("keyboardWillShow",V=>{const E=V.endCoordinates.height;t({moveTo:-(f+E)}).start()}),a=h.addListener("keyboardWillHide",()=>{t({moveTo:-n}).start()});return()=>{r.remove(),a.remove()}},[t,n,e]),m(s.View,{style:[p.wrapper,{transform:[{translateY:i}]}],children:m(Y,{onDraggedUp:D,onDraggedMiddle:S,onDraggedDown:w,onDragToClose:b,onDragFinished:y,unstable_disableDragging:T,style:[p.container,{backgroundColor:x.layeredBackground,maxHeight:L,width:o.width-20},k],onLayout:r=>{const a=r.nativeEvent.layout.height;B.current=a,e||i.setValue(a)},children:v})})}const p=j.create({wrapper:{position:"absolute",bottom:0},container:{bottom:0,borderRadius:28,left:10}});
