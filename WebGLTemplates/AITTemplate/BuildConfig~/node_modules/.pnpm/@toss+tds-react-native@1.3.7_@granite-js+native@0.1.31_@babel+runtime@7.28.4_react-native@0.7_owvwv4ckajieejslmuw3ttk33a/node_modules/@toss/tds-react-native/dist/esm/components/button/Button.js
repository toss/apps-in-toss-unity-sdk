"use strict";import{jsx as d,jsxs as x}from"react/jsx-runtime";import{colors as W}from"@toss/tds-colors";import{bezier as S,spring as t}from"@toss/tds-easings";import{Children as L,forwardRef as F,Fragment as _,useCallback as A,useEffect as M,useMemo as v,useState as J}from"react";import{Easing as b,Pressable as K,StyleSheet as B,useAnimatedValue as m,View as Q}from"react-native";import{ThemeProvider as U,useTheme as X}from"../../core";import{Animated as e}from"../../interactions/animated";import{RadialGradient as Y}from"../gradient";import{Txt as Z}from"../txt";const $=F(function({children:a,onPress:i,size:o="big",style:u="fill",display:c="inline",disabled:l=!1,loading:n=!1,viewStyle:s,color:g,containerStyle:C,textStyle:N,pointerEvents:q=void 0,leftAccessory:w,onPressIn:V,onPressOut:z,...O},E){const f=X(),D=re(),k=u==="weak"?{backgroundColor:f.token.button.backgroundWeakColor,textColor:f.token.button.textWeakColor,dimColor:f.token.button.dimWeakColor,gradientStartColor:f.token.button.gradientStartWeakColor,gradientEndColor:f.token.button.gradientEndWeakColor,loaderColor:f.token.button.loaderWeakColor}:{backgroundColor:f.token.button.backgroundFillColor,textColor:f.token.button.textFillColor,dimColor:f.token.button.dimFillColor,gradientStartColor:f.token.button.gradientStartFillColor,gradientEndColor:f.token.button.gradientEndFillColor,loaderColor:f.token.button.loaderFillColor},h=!(l||n),[H,j]=J(!1),I=A(y=>{V?.(y),h!==!1&&j(!0)},[V,h]),P=A(y=>{z?.(y),h!==!1&&j(!1)},[z,h]),p=ie({style:u,display:c});M(()=>{if(H){p.controller.pressed.start();return}if(n&&D.controller.loader.start(),n&&l){p.controller.loadingWhileDisabled.start();return}if(n&&!l){p.controller.loading.start();return}if(!n&&l){p.controller.disabled.start();return}p.controller.default.start()},[n,l,p.controller,D.controller,H]);const T=L.map(a,(y,G)=>typeof y=="string"||typeof y=="number"?d(Z,{typography:oe[o],color:g??k.textColor,style:N,fontWeight:"semibold",children:y}):d(_,{children:y},G));return d(K,{accessibilityRole:"button",onPress:h?i:void 0,pointerEvents:q,onPressIn:I,onPressOut:P,style:[ee[c],s],ref:E,...O,accessibilityState:{disabled:l,...O.accessibilityState},children:x(e.View,{ref:E,style:[containerStylesBySize.base,containerStylesBySize[o],te[c],p.style.container,C],children:[d(e.View,{style:[{position:"absolute",top:0,left:0,right:0,bottom:0},{backgroundColor:k.backgroundColor},p.style.background]}),x(e.View,{style:[{flexDirection:"row",alignItems:"center"},p.style.text],children:[w,T]}),d(e.View,{style:[{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center"},p.style.gradient],children:d(Q,{style:{width:"110%",aspectRatio:1},children:d(Y,{colors:[k.gradientStartColor,k.gradientEndColor]})})}),d(e.View,{style:[{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center"},p.style.loader],children:x(e.View,{style:{flexDirection:"row",gap:7},children:[d(e.View,{style:[{width:8,height:8,backgroundColor:k.loaderColor,borderRadius:99},D.style.loader1]}),d(e.View,{style:[{width:8,height:8,backgroundColor:k.loaderColor,borderRadius:99},D.style.loader2]}),d(e.View,{style:[{width:8,height:8,backgroundColor:k.loaderColor,borderRadius:99},D.style.loader3]})]})}),d(e.View,{style:[{position:"absolute",top:0,left:0,right:0,bottom:0},{backgroundColor:k.dimColor},p.style.dim]})]})})});export const containerStylesBySize=B.create({base:{alignItems:"center",justifyContent:"center",overflow:"hidden",position:"relative"},tiny:{paddingHorizontal:10,paddingVertical:2,minHeight:32,minWidth:52,borderRadius:8},medium:{paddingHorizontal:16,paddingVertical:2,minHeight:38,minWidth:64,borderRadius:10},large:{paddingHorizontal:16,paddingVertical:2,minHeight:48,minWidth:80,borderRadius:14},big:{paddingHorizontal:28,paddingVertical:2,minHeight:56,minWidth:96,borderRadius:16}});const ee=B.create({inline:{alignSelf:"flex-start"},block:{},full:{}}),te=B.create({inline:{},block:{},full:{borderRadius:0}});function R(){const r=m(.2),a=m(.8),i=A(()=>e.parallel([e.loop(e.sequence([e.timing(r,{toValue:1,duration:300,easing:b.linear,useNativeDriver:!1}),e.timing(r,{toValue:.2,duration:300,easing:b.linear,useNativeDriver:!1})])),e.loop(e.sequence([e.timing(a,{toValue:1,duration:300,easing:b.linear,useNativeDriver:!1}),e.timing(a,{toValue:.8,duration:300,easing:b.linear,useNativeDriver:!1})]))]),[r,a]);return v(()=>({style:{loader:{opacity:r,transform:[{scale:a}]}},controller:{create:i}}),[r,a,i])}function re(){const r=R(),a=R(),i=R(),o=v(()=>e.parallel([e.sequence([r.controller.create()]),e.sequence([e.delay(100),a.controller.create()]),e.sequence([e.delay(200),i.controller.create()])]),[r.controller,a.controller,i.controller]);return v(()=>({style:{loader1:r.style.loader,loader2:a.style.loader,loader3:i.style.loader},controller:{loader:{...o,start:()=>{o.reset(),o.start()}}}}),[r.style.loader,a.style.loader,i.style.loader,o])}function ie({style:r,display:a}){const i=m(1),o=m(1),u=m(1),c=m(1),l=m(1),n=m(0),s=m(0),g=m(0),C=v(()=>e.parallel([e.spring(n,{toValue:0,...t.quick,useNativeDriver:!1}),e.spring(u,{toValue:1,...t.quick,useNativeDriver:!1}),e.spring(s,{toValue:0,...t.quick,useNativeDriver:!1}),e.spring(c,{toValue:1,...t.quick,delay:100,useNativeDriver:!1}),e.spring(g,{toValue:0,...t.quick,useNativeDriver:!1}),e.spring(i,{toValue:1,...t.quick,useNativeDriver:!1}),e.spring(o,{toValue:1,...t.quick,useNativeDriver:!1}),e.spring(l,{toValue:1,...t.quick,useNativeDriver:!1})]),[u,i,o,n,s,g,c,l]),N=v(()=>e.parallel([e.spring(n,{toValue:.26,...t.quick,useNativeDriver:!1}),e.spring(u,{toValue:1,...t.quick,useNativeDriver:!1}),e.spring(s,{toValue:0,...t.quick,useNativeDriver:!1}),a==="inline"?e.spring(o,{toValue:.96,...t.rapid,useNativeDriver:!1}):e.spring(l,{toValue:.96,...t.rapid,useNativeDriver:!1})]),[u,o,n,a,s,l]),q=v(()=>(s.setValue(0),e.parallel([e.spring(n,{toValue:.13,...t.quick,useNativeDriver:!1}),e.spring(u,{toValue:1,...t.quick,useNativeDriver:!1}),e.loop(e.sequence([e.timing(s,{toValue:r==="fill"?.7:.24,easing:b.bezier(...S.out),duration:600,useNativeDriver:!1}),e.timing(s,{toValue:0,easing:b.bezier(...S.out),duration:600,useNativeDriver:!1})])),e.spring(c,{toValue:0,...t.quick,useNativeDriver:!1}),e.spring(g,{toValue:1,...t.quick,useNativeDriver:!1}),e.spring(i,{toValue:1,...t.quick,useNativeDriver:!1}),e.spring(o,{toValue:1,...t.quick,useNativeDriver:!1}),e.spring(l,{toValue:1,...t.quick,useNativeDriver:!1})])),[u,i,o,n,s,g,r,c,l]),w=v(()=>(s.setValue(0),e.parallel([e.spring(n,{toValue:0,...t.quick,useNativeDriver:!1}),e.spring(u,{toValue:r==="fill"?.26:1,...t.quick,useNativeDriver:!1}),e.loop(e.sequence([e.timing(s,{toValue:r==="fill"?.2:.14,easing:b.bezier(...S.out),duration:600,useNativeDriver:!1}),e.timing(s,{toValue:0,easing:b.bezier(...S.out),duration:600,useNativeDriver:!1})])),e.spring(c,{toValue:0,...t.quick,useNativeDriver:!1}),e.spring(g,{toValue:r==="fill"?.7:.3,...t.quick,useNativeDriver:!1}),e.spring(i,{toValue:1,...t.quick,useNativeDriver:!1}),e.spring(o,{toValue:1,...t.quick,useNativeDriver:!1}),e.spring(l,{toValue:1,...t.quick,useNativeDriver:!1})])),[u,i,o,n,s,g,r,c,l]),V=v(()=>e.parallel([e.spring(n,{toValue:0,...t.quick,useNativeDriver:!1}),e.spring(u,{toValue:1,...t.quick,useNativeDriver:!1}),e.spring(s,{toValue:0,...t.quick,useNativeDriver:!1}),e.spring(c,{toValue:r==="fill"?1:.38,...t.quick,delay:100,useNativeDriver:!1}),e.spring(g,{toValue:0,...t.quick,useNativeDriver:!1}),e.spring(i,{toValue:r==="fill"?.26:1,...t.quick,useNativeDriver:!1}),e.spring(o,{toValue:1,...t.quick,useNativeDriver:!1}),e.spring(l,{toValue:1,...t.quick,useNativeDriver:!1})]),[u,i,o,n,s,g,r,c,l]);return v(()=>({style:{container:{opacity:i,transform:[{scale:o}]},background:{opacity:u},text:{opacity:c,transform:[{scale:l}]},dim:{opacity:n},gradient:{opacity:s},loader:{opacity:g}},controller:{default:C,pressed:N,loading:q,loadingWhileDisabled:w,disabled:V}}),[u,i,o,C,n,V,s,g,q,w,N,c,l])}const oe={tiny:"t7",medium:"t6",large:"st9",big:"st9"},ae={danger:W.red500,light:W.whiteOpacity900,dark:W.grey700};export const Button=F(function({type:a,...i},o){const u=v(()=>a===void 0||a==="primary"?{}:{color:{primary:ae[a]}},[a]);return d(U,{token:u,children:d($,{...i,ref:o})})});
