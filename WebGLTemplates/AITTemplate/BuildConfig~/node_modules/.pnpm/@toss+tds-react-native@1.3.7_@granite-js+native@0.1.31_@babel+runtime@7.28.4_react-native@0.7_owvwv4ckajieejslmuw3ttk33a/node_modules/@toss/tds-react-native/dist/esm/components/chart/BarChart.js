"use strict";import{jsx as r,jsxs as s}from"react/jsx-runtime";import{Svg as N,Defs as U,RadialGradient as k,Rect as q,Stop as D}from"@granite-js/native/react-native-svg";import{Stack as f}from"@granite-js/react-native";import{colors as x}from"@toss/tds-colors";import{forwardRef as J,useMemo as p}from"react";import{Dimensions as K}from"react-native";import{useAdaptive as Q}from"../../core";import{Txt as L}from"../txt";function M({borderRadius:i,backgroundColor:e=x.grey100,...c}){const h="bar-background-color",o=`0 0 ${c.width} ${c.height}`;return s(N,{viewBox:o,...c,children:[r(U,{children:s(k,{id:h,cx:"0%",cy:"100%",r:"100%",fx:"0%",fy:"100%",gradientUnits:"objectBoundingBox",children:[r(D,{offset:"0%",stopColor:typeof e=="string"?e:e[0]}),r(D,{offset:"100%",stopColor:typeof e=="string"?e:e[1]})]})}),r(q,{width:c.width??"100%",height:c.height??"100%",fill:`url(#${h})`,rx:i,ry:i})]})}function b({style:i,color:e=x.grey600,...c}){return r(L,{style:[{marginTop:6,paddingHorizontal:4},i],typography:"st13",color:e,fontWeight:"medium",textAlign:"center",...c})}function Y({style:i,color:e=x.grey500,...c}){return r(L,{style:[{marginBottom:6,paddingHorizontal:6},i],typography:"st12",color:e,fontWeight:"medium",textAlign:"center",...c})}function R({gutter:i=0,...e}){return r(f,{direction:"vertical",align:"center",justify:"flex-end",gutter:i,...e})}function S({gutter:i=0,...e}){return r(f,{direction:"horizontal",justify:"center",gutter:i,...e})}function _({gutter:i=0,...e}){return r(f,{direction:"horizontal",justify:"center",gutter:i,...e})}const{width:Z}=K.get("window");export const BarChart=J(function({data:e=[],width:c=Z,height:h=205,fill:o={type:"all-bar",theme:"blue"},style:A,...B},C){const t=Q(),I=48,T=24,O=23,H=58,V=38,$=c-I,X=h-T-O,E=Math.max(...e.map(({value:n})=>n)),m=Math.floor(Math.min($/e.length,H)),F=X*.7,j=n=>Math.floor(n/E*F),u=Math.round(V/H*m),v=u>=30?8:u>9?Math.floor(u/5+2):3,a=p(()=>({default:t.grey100,blue:[t.blue300,t.blue500],green:[t.green200,t.green400],yellow:[t.yellow300,t.yellow500],orange:[t.orange300,t.orange500],red:[t.red300,t.red500],grey:[t.grey400,t.grey500]}),[t]),g=p(()=>({default:t.grey500,blue:t.blue700,green:t.green800,yellow:t.yellow900,orange:t.orange900,red:t.red700,grey:t.grey700}),[t]),W=[o.type,o.theme,o.count],z=p(()=>{const n=a.default;if(o.type==="auto"){const d=[a.blue,a.green,a.yellow,a.orange,a.red,a.grey];return new Array(e.length).fill(n).map((w,y)=>y<o.count?d[y%d.length]:w).reverse()}const l=a[o.theme]??o.theme;return o.type==="single-bar"?[...new Array(e.length-1).fill(n),l]:new Array(e.length).fill(l)},[...W,e.length,a]),G=p(()=>{const n=g.default;if(o.type==="auto"){const d=[g.blue,g.green,g.yellow,g.orange,g.red,g.grey];return new Array(e.length).fill(n).map((w,y)=>y<o.count?d[y%d.length]:w).reverse()}const l=g[o.theme]??o.theme;return o.type==="single-bar"?[...new Array(e.length-1).fill(n),l]:new Array(e.length).fill(n)},[...W,e.length,g]);return e.length<=12?s(f,{ref:C,style:[{paddingHorizontal:24,paddingVertical:12,minHeight:h},A],gutter:0,...B,children:[r(S,{children:e.map(({value:n},l)=>s(R,{style:{width:m},children:[r(Y,{color:G[l],children:n}),r(M,{width:u,height:j(n),borderRadius:v,backgroundColor:z[l]})]},l))}),r(_,{children:e.map(({xAxisLabel:n},l)=>r(b,{style:{width:m},children:n},l))})]}):s(f,{ref:C,style:[{paddingHorizontal:24,paddingVertical:12,minHeight:h},A],gutter:0,...B,children:[r(S,{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:e.map(({value:n},l)=>r(R,{style:{width:m},children:r(M,{width:u,height:j(n),borderRadius:v,backgroundColor:z[l]})},l))}),s(_,{justify:"space-between",children:[r(b,{children:e[0]?.xAxisLabel}),r(b,{children:e[e.length-1]?.xAxisLabel})]})]})});
