"use strict";import{jsx as c}from"react/jsx-runtime";import{useCallback as u,useEffect as h,useMemo as v,useRef as x}from"react";import{ThemeProvider as C,useOverlay as T}from"../../core";import{Bridge as g}from"./Bridge";export function useBridge({closeOnDestroy:n=!0}={}){const e=x(),r=T(),o=u(()=>r.close(),[r]),s=u(({onExited:l,onClose:m,color:a,...i})=>{e.current&&clearTimeout(e.current),e.current=setTimeout(()=>{r.open(({isOpen:d,exit:p,close:b})=>c(C,{token:{color:{primary:a}},children:c(g,{open:d,onClose:()=>{m?.(),b()},onExited:()=>{l?.(),p()},...i})}));const f=i.variant==="basic"?2e3:2300;e.current=setTimeout(()=>{o()},f)},200)},[o,r]),t=v(()=>({close:o,open:s}),[o,s]);return h(()=>()=>{n&&t?.close()},[n,t]),t}
