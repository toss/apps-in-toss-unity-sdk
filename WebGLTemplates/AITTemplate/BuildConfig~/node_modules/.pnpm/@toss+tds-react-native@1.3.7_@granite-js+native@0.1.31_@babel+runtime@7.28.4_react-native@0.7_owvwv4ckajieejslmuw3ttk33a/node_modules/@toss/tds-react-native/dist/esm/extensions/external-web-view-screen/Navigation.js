"use strict";import{Fragment as p,jsx as n,jsxs as y}from"react/jsx-runtime";import{useHeaderHeight as O}from"@granite-js/native/@react-navigation/elements";import{useNavigation as s}from"@granite-js/native/@react-navigation/native";import{closeView as h}from"@granite-js/react-native";import{colors as f,colorsByPreference as v}from"@toss/tds-colors";import{Children as x,useCallback as C,useLayoutEffect as u,useMemo as k}from"react";import{Dimensions as B,Image as N,Platform as w,View as g}from"react-native";import{Asset as T}from"../../components/asset";import{LinearGradient as I}from"../../components/gradient";import{ReactNavigationNavbar as m}from"../../components/navbar";import{useShadow as b}from"../../components/shadow";import{Txt as P}from"../../components/txt";import{useColorPreference as c}from"../../core/contexts/ColorPreferenceProvider";import{PreventFontScaling as R}from"../../extensions/prevent-font-scaling";function l(){const{colorPreference:t}=c(),{adaptive:e}=k(()=>({adaptive:v[t]}),[t]);return e}function d(t){return x.toArray(t).length>0}export function Navigation({children:t}){const e=s(),o=l(),{colorPreference:r}=c(),i=d(t);return u(()=>{function a(){e.setOptions({headerStyle:null,statusBarStyle:"auto"})}if(!i){a();return}return e.setOptions({headerStyle:{backgroundColor:o.background},statusBarStyle:"auto"}),()=>{a()}},[e,r,i,o.background]),n(p,{children:t})}export function useBackOrCloseNavigation(){const t=s();return C(()=>{t.canGoBack()?t.goBack():h()},[t])}const L=w.select({android:f.greyOpacity400,ios:f.greyOpacity100,default:f.greyOpacity100});export function NavigationBackdrop(){const{colorPreference:t}=c(),e=l(),o=O(),r=t==="dark",i=b({offset:{x:0,y:0},opacity:1,radius:r?50:20,color:r?"rgba(0, 0, 0, 0.1)":L}),a=r?[e.grey100,e.grey300,e.grey100]:[e.greyOpacity100,e.greyOpacity300,e.greyOpacity100];return y(g,{pointerEvents:"none",style:[{position:"absolute",top:-o,left:0,right:0,zIndex:1,width:"100%",height:o+.5}],children:[n(g,{pointerEvents:"none",style:[{position:"absolute",top:0,left:0,right:0,backgroundColor:e.background,width:"100%",height:o},i]}),n(I,{degree:90,easing:"linear",positions:[0,.5,1],colors:a})]})}export function NavigationLeft({children:t,visible:e=!0}){const o=s();return u(()=>{if(!d(t)||!e){o.setOptions({headerLeft:null});return}o.setOptions({headerLeft:()=>n(p,{children:t})})},[t,o,e]),null}export function NavigationRight({children:t,visible:e=!0}){const o=s();return u(()=>{if(!d(t)||!e){o.setOptions({headerRight:null});return}o.setOptions({headerRight:()=>n(g,{style:{marginRight:4,flexDirection:"row"},children:t})})},[t,o,e]),null}const S=B.get("window").width;export function NavigationCenter({children:t,visible:e=!0}){const r=s();return u(()=>{if(!d(t)||!e){r.setOptions({headerBackVisible:!1,headerTitle:null});return}r.setOptions({headerTitleAlign:"center",headerBackVisible:!1,headerTitle:()=>n(g,{style:[{maxWidth:S-100,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:5}],children:t})})},[t,r,e]),null}export function NavigationTitleIcon(t){const e={width:16,height:16,radius:5};return t.name!==void 0?n(T.Icon,{name:t.name,frameShape:e}):n(N,{source:t.source,style:{overflow:"hidden",borderRadius:e.radius,width:e.width,height:e.height}})}export function NavigationTitleText({style:t,...e}){const o=l();return n(R,{limit:100,children:n(P,{typography:"st10",fontWeight:"semibold",color:o.grey900,numberOfLines:1,ellipsizeMode:"tail",...e})})}export function NavigationBackButton({onPress:t,canGoBack:e=!0}){const{colorPreference:o}=c(),r=l(),i=o==="light"?r.greyOpacity400:r.greyOpacity500,a=useBackOrCloseNavigation();return n(m.BackButton,{tintColor:i,onPress:()=>{t?.(),e&&a()}})}export function NavigationCloseButton({onPress:t}){const{colorPreference:e}=c(),o=l(),r=e==="light"?o.greyOpacity400:o.greyOpacity500;return n(m.CloseButton,{tintColor:r,onPress:()=>{t?.(),h()}})}
