"use strict";import{Fragment as d,jsx as i}from"react/jsx-runtime";import{useNavigation as l}from"@granite-js/native/@react-navigation/native";import{closeView as L}from"@granite-js/react-native";import{colors as T}from"@toss/tds-colors";import{Children as b,forwardRef as k,useCallback as B,useLayoutEffect as s,useMemo as N}from"react";import{Dimensions as O,Image as w,Platform as R,TouchableOpacity as I,View as g}from"react-native";import{Asset as S}from"../../components/asset";import{ReactNavigationNavbar as m}from"../../components/navbar";import{Txt as D}from"../../components/txt";import{getTypographyMap as y}from"../../constants";import{useAdaptive as V,useColorPreference as A}from"../../core";import{capTypographyLevel as E,useTypographyLevel as x}from"../../core/hooks/useTypographyLevel";import{COLOR_PALETTE as f}from"../top-navigation";function c(t){return b.toArray(t).length>0}export function Navigation({children:t}){const e=l(),o=V(),{colorPreference:n}=A(),r=c(t);return s(()=>{function a(){e.setOptions({headerStyle:null,statusBarStyle:"auto"})}if(!r){a();return}return e.setOptions({headerStyle:{backgroundColor:o.background},statusBarStyle:n==="dark"?"light":"dark"}),()=>{a()}},[o.background,n,r,e]),i(d,{children:t})}export function useBackOrCloseNavigation(){const t=l();return B(()=>{t.canGoBack()?t.goBack():L()},[t])}export function NavigationLeft({children:t,visible:e=!0}){const o=l();return s(()=>{if(!c(t)||!e){o.setOptions({headerLeft:null});return}o.setOptions({headerLeft:()=>i(d,{children:t})})},[t,o,e]),null}export function NavigationRight({children:t,visible:e=!0}){const o=l();return s(()=>{if(!c(t)||!e){o.setOptions({headerRight:null});return}o.setOptions({headerRight:()=>i(NavigationRightWrapper,{children:t})})},[t,o,e]),null}export function NavigationRightWrapper({children:t}){return i(g,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4,marginLeft:4,marginRight:-4},children:t})}const v=O.get("window").width;export function NavigationContent({children:t,visible:e=!0,onPressTitle:o,horizontalSafeMargin:n=0,theme:r="light",withHome:a=!1,leftVisible:C}){const u=l(),p=N(()=>a?{height:34,paddingLeft:12,paddingRight:10,maxWidth:v-n,backgroundColor:f[r].backgroundColor,borderRadius:99}:void 0,[a,n,r]),h=C?R.OS==="ios"?-4:0:a?-4:8;return s(()=>{if(!c(t)||!e){u.setOptions({headerBackVisible:!1,headerTitle:null});return}u.setOptions({headerTitleAlign:"center",headerBackVisible:!1,headerTitle:()=>i(g,{style:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",flex:1,marginLeft:h,alignSelf:"flex-start"},children:i(g,{style:{flexDirection:"row",alignItems:"center",gap:6,maxWidth:v-n},children:o?i(I,{onPress:o,style:[{flexDirection:"row",alignItems:"center",gap:6},p],children:t}):t})}),headerTintColor:T.grey900})},[t,n,u,o,e,p,h]),null}export function NavigationTitleIcon(t){const e=x(),n=y(e).t6.fontSize,r={width:18,height:18,radius:6};return n>=22&&t.name!=="icon-home-mono"?null:t.name!==void 0?i(S.Icon,{name:t.name,frameShape:r}):i(w,{source:t.source,style:{overflow:"hidden",borderRadius:r.radius,width:r.width,height:r.height}})}export function NavigationTitleText({style:t,theme:e="light",...o}){const n=x(),r=E(n,135),a=y(r);return i(D,{fontWeight:"semibold",style:{fontSize:a.t6.fontSize,lineHeight:a.t6.lineHeight},color:f[e].titleTextColor,numberOfLines:1,ellipsizeMode:"tail",...o})}export function NavigationBackButton({onPress:t,canGoBack:e=!0,theme:o="light"}){const n=useBackOrCloseNavigation();return i(m.BackButton,{tintColor:f[o].titleTextColor,accessibilityRole:"button",accessible:!0,accessibilityLabel:e?"\uB4A4\uB85C\uAC00\uAE30":"\uB2EB\uAE30",onPress:()=>{t?.(),e&&n()}})}export const NavigationIconButton=k(function(e,o){return i(m.RightIconButton,{ref:o,...e})});
