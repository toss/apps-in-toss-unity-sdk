"use strict";import{jsx as p}from"react/jsx-runtime";import{cloneElement as E,useCallback as a,useEffect as O,useMemo as w}from"react";import{AlertDialog as B,ConfirmDialog as d}from"../../../components/dialog";import{useOverlay as _}from"../../../core";export function useDialog(g={}){const o=_(),P=a(()=>{o.close()},[o]),{closeOnDestroy:y=!0}=g,C=a(({closeOnDimmerClick:s=!1,onEntered:r,onButtonPress:c,...f})=>new Promise(i=>{o.open(({isOpen:n,close:e,exit:t})=>p(B,{...f,open:n,onEntered:r,onClose:()=>{i(),e()},onButtonPress:()=>{c?.(),i(),e()},onExited:()=>{t()},closeOnDimmerClick:s}))}),[o]),D=a(({rightButton:s="\uD655\uC778",leftButton:r="\uCDE8\uC18C",closeOnDimmerClick:c=!1,onEntered:f,...i})=>{const n=typeof s=="string"?p(d.Button,{children:s}):s,e=typeof r=="string"?p(d.Button,{children:r}):r;return new Promise(t=>{o.open(({isOpen:k,close:m,exit:x})=>p(d,{...i,open:k,onEntered:f,onClose:()=>{t(!1),m()},onExited:()=>{x()},rightButton:E(n,{...n.props,onPress:u=>{t(!0),n.props.onPress===void 0?m():n.props.onPress(u)}}),leftButton:E(e,{...e.props,type:"dark",style:"weak",onPress:u=>{t(!1),e.props.onPress===void 0?m():e.props.onPress(u)}}),closeOnDimmerClick:c}))})},[o]),l=w(()=>({close:P,openAlert:C,openConfirm:D}),[P,C,D]);return O(()=>()=>{y&&l?.close()},[y,l]),l}
