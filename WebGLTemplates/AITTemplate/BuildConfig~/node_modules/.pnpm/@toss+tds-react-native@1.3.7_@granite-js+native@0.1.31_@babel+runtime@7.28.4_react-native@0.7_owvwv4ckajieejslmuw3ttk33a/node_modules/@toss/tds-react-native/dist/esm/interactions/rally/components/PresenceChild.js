"use strict";import{jsx as c}from"react/jsx-runtime";import{useEffect as u,useMemo as i,useRef as o}from"react";import{getUniqueId as d}from"../helper/getUniqueId";import{PresenceContext as l}from"../contexts/PresenceContext";export function PresenceChild(e){const s=o(d()).current,t=o(new Map).current,f=i(()=>({id:s,present:e.present,onExitComplete:n=>{t.set(n,!0);for(const r of t.values())if(!r)return;e.onExitEnd&&e.onExitEnd()},register:n=>(t.set(n,!1),()=>t.delete(n))}),[e.present]);return i(()=>{t.forEach((n,r)=>t.set(r,!1))},[e.present]),u(()=>{!e.present&&!t.size&&e.onExitEnd&&e.onExitEnd()},[e.present]),c(l.Provider,{value:f,children:e.children})}
