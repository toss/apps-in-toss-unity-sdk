"use strict";import{useMemo as a,useRef as h}from"react";import{Animated as A}from"react-native";import{Animation as p,createInterpolationStyle as b,createMotionAnimation as u,toAnimationController as g,toMotions as k}from"../operations";import{useCurrentProgressStyleIndex as P}from"./useCurrentProgressStyle";export function useRallyAnimation({motionInputs:n,layout:c}){const e=h(new A.Value(0)).current,d=P(e,{motionLength:n.length}),t=a(()=>k(n,c),[n,c]),s=a(()=>t.map((r,o)=>{const f=b(e,{motion:r,inputRange:[o,o+1]}),w=u({progress:e,toValue:o+1,motion:r}),y=u({progress:e,toValue:o,motion:r});return{style:f,forward:g(w,{progress:e,endProgress:t.length}),backward:g(y,{progress:e,endProgress:t.length})}}),[t,e]),l=p.sequence(s.map(r=>r.forward)),m=p.sequence([...s.map(r=>r.backward).reverse()]),i=s.map(r=>r.style)[d];return a(()=>({forward:l,backward:m,style:i}),[l,m,i])}
