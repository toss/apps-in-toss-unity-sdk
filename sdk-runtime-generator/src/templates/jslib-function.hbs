    {{name}}: function({{#each parameters}}{{name}}{{#unless @last}}, {{/unless}}{{/each}}{{#if hasCallback}}{{#if parameters.length}}, {{/if}}callbackId, typeName{{/if}}) {
{{#if isAsync}}
        const callback = UTF8ToString(callbackId);
        const typeNameStr = UTF8ToString(typeName);
        {{#if hasWebFrameworkImport}}
        // @apps-in-toss/web-framework API 호출
        if (typeof {{webFrameworkNamespace}} !== 'undefined' && {{webFrameworkNamespace}}.{{originalName}}) {
            {{webFrameworkNamespace}}.{{originalName}}({{#each parameters}}{{jsConversion}}{{#unless @last}}, {{/unless}}{{/each}})
                .then(function(result) {
{{#if isDiscriminatedUnion}}
                    // Discriminated Union 처리: 런타임 타입 체크
                    let resultPayload;
                    if (typeof result === 'string') {
                        // 에러 케이스 (문자열 리터럴)
                        resultPayload = {
                            _type: "error",
                            _errorCode: result,
                            _successJson: ""
                        };
                    } else {
                        // 성공 케이스 (객체)
                        resultPayload = {
                            _type: "success",
                            _successJson: JSON.stringify(result),
                            _errorCode: ""
                        };
                    }

                    const payload = JSON.stringify({
                        CallbackId: callback,
                        TypeName: typeNameStr,
                        Result: JSON.stringify(resultPayload)
                    });
{{else}}
                    // 일반 케이스: 결과를 Unity AITCore로 전달
                    const payload = JSON.stringify({
                        CallbackId: callback,
                        TypeName: typeNameStr,
                        Result: JSON.stringify(result)
                    });
{{/if}}

                    // AITCore.Instance.OnAITCallback 호출
                    SendMessage('AITCore', 'OnAITCallback', payload);
                })
                .catch(function(error) {
                    console.error('{{name}} error:', error);
                    const payload = JSON.stringify({
                        CallbackId: callback,
                        TypeName: typeNameStr,
                        Result: JSON.stringify({ error: error.message })
                    });
                    SendMessage('AITCore', 'OnAITCallback', payload);
                });
        } else {
            console.warn('{{webFrameworkNamespace}}.{{originalName}} not available');
        }
{{else}}
        // 동기 함수 (callback 사용)
        try {
            const result = {{webFrameworkNamespace}}.{{originalName}}({{#each parameters}}{{jsConversion}}{{#unless @last}}, {{/unless}}{{/each}});
            const payload = JSON.stringify({
                CallbackId: callback,
                TypeName: typeNameStr,
                Result: JSON.stringify(result)
            });
            SendMessage('AITCore', 'OnAITCallback', payload);
        } catch (error) {
            console.error('{{name}} error:', error);
        }
{{/if}}
{{else}}
        // 동기 반환 함수
        if (typeof {{webFrameworkNamespace}} !== 'undefined' && {{webFrameworkNamespace}}.{{originalName}}) {
            return {{webFrameworkNamespace}}.{{originalName}}({{#each parameters}}{{jsConversion}}{{#unless @last}}, {{/unless}}{{/each}});
        }
        console.warn('{{webFrameworkNamespace}}.{{originalName}} not available');
        return {{defaultReturnValue}};
{{/if}}
    },
